!function(e){function t(t){for(var n,i,c=t[0],u=t[1],l=t[2],f=0,p=[];f<c.length;f++)i=c[f],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);for(s&&s(t);p.length;)p.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,c=1;c<r.length;c++){var u=r[c];0!==a[u]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={1:0},o=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var s=u;o.push([500,0]),r()}({479:function(e,t,r){},482:function(e,t,r){},483:function(e,t,r){},484:function(e,t,r){},487:function(e,t,r){},488:function(e,t,r){},489:function(e,t,r){},490:function(e,t,r){},491:function(e,t,r){},492:function(e,t,r){},493:function(e,t,r){},494:function(e,t,r){},495:function(e,t,r){},496:function(e,t,r){},497:function(e,t,r){},498:function(e,t,r){},499:function(e,t,r){},500:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"star",(function(){return re})),r.d(n,"heart",(function(){return ne}));r(253),r(254),r(255),r(256),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(265),r(266),r(267),r(268),r(269),r(270),r(271),r(272),r(273),r(274),r(275),r(276),r(277),r(278),r(279),r(280),r(118),r(281),r(282),r(283),r(284),r(285),r(286),r(287),r(288),r(289),r(290),r(291),r(292),r(293),r(294),r(295),r(297),r(298),r(299),r(300),r(301),r(303),r(304),r(306),r(307),r(308),r(309),r(310),r(311),r(312),r(313),r(314),r(315),r(316),r(317),r(318),r(319),r(321),r(322),r(323),r(324),r(325),r(326),r(327),r(328),r(329),r(330),r(331),r(332),r(333),r(335),r(336),r(337),r(338),r(339),r(340),r(341),r(342),r(343),r(344),r(345),r(346),r(347),r(348),r(349),r(350),r(351),r(352),r(353),r(354),r(355),r(356),r(357),r(358),r(359),r(360),r(361),r(362),r(363),r(364),r(365),r(366),r(367),r(369),r(370),r(371),r(372),r(375),r(376),r(377),r(378),r(379),r(380),r(381),r(382),r(383),r(384),r(385),r(386),r(387),r(388),r(389),r(212),r(390),r(391),r(392),r(393),r(394),r(395),r(396),r(213),r(397),r(398),r(399),r(400),r(401),r(402),r(403),r(404),r(405),r(406),r(407),r(408),r(409),r(410),r(411),r(412),r(413),r(414),r(415),r(416),r(417),r(418),r(419),r(420),r(421),r(422),r(424),r(425),r(426),r(427),r(428),r(429),r(430),r(431),r(432),r(433),r(434),r(435),r(436),r(437),r(438),r(439),r(440),r(441),r(442),r(443),r(444),r(445),r(446),r(447),r(448),r(449),r(450),r(451),r(452),r(453),r(454),r(455),r(456),r(457),r(458),r(459),r(460),r(461),r(462),r(463),r(464),r(467),r(220);var a=r(0),o=r.n(a),i=r(19),c=r.n(i),u=r(9),l=r(537),s=r(538),f=r(238),p=r(239),d=(r(478),r(479),r(6),r(23)),m=r.n(d),h=r(533),v=r(540),b=r(28),y=function(e){return Object(b.a)(e,"image.list")},g=function(e){return Object(b.a)(e,"image.data")},E=function(e){return Object(b.a)(e,"image.activeIndex")},w=function(e){var t=E(e);return Object(b.a)(e,"image.data.".concat(t,".palette"))},O=function(e){var t=E(e);return Object(b.a)(e,"image.data.".concat(t,".pattern"))},I=function(e){return Object(b.a)(e,"image.zoom")},j=function(e){return Object(b.a)(e,"image.step")},S=function(e){return{col:Object(b.a)(e,"image.col"),row:Object(b.a)(e,"image.row")}},A=function(e){return{type:"UPDATE_PATTERN",pattern:e}},x=function(e,t,r,n){return{type:"UPDATE_DATA_AND_LIST",list:e,data:t,row:r,col:n}},_=function(e){return{type:"UPDATE_IMAGE_STATE",state:e}};function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var N=function(){var e="object"===("undefined"==typeof window?"undefined":P(window)),t=k(Object(a.useState)("xl"),2),r=t[0],n=t[1];return Object(a.useEffect)((function(){if(!e)return!1;var t=function(){var t={width:e?window.innerWidth:void 0,height:e?window.innerHeight:void 0}.width,r="xl";t>=960&&t<1200?r="lg":t>=768&&t<960?r="md":t>=576&&t<768?r="sm":t<576&&(r="xs"),n(r)};return t(),window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),r},M=r(38),T=r(60),R=r(229),D=r(230),z=function(e){return{type:"UPDATE_PATTERNS",patterns:e}};function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var B={title:"Magic Pattern",author:"Pietro",town:"Riku"};function H(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $={activeIndex:-1,col:1,row:1,zoom:4,list:[],data:{},listUpdateBy:"",step:-1};function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function W(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var K={patterns:[]};var J=Object(T.c)({author:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_TITLE":return L(L({},e),{},{title:t.title});case"UPDATE_AUTHOR":return L(L({},e),{},{author:t.author});case"UPDATE_TOWN":return L(L({},e),{},{town:t.town});case"UPDATE_AUTHOR_INFO":return L(L({},e),t.info);default:return e}},image:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_PATTERN":return Y(Y({},e),{},{data:Y(Y({},e.data),{},q({},e.activeIndex,Y(Y({},e.data[e.activeIndex]),{},{pattern:H(t.pattern)})))});case"UPDATE_PALETTE":var r=H(e.data[e.activeIndex].palette),n=t.paletteIndex,a=t.colorIndex;return r[n]=a,Y(Y({},e),{},{data:Y(Y({},e.data),{},q({},e.activeIndex,Y(Y({},e.data[e.activeIndex]),{},{palette:r})))});case"UPDATE_COLOR_SERIE_PALETTE":var o=[].concat(H(t.colorSerie),H(e.data[e.activeIndex].palette.slice(9)));return console.log(o),Y(Y({},e),{},{data:Y(Y({},e.data),{},q({},e.activeIndex,Y(Y({},e.data[e.activeIndex]),{},{palette:o})))});case"UPDATE_ACTIVE_INDEX":return Y(Y({},e),{},{activeIndex:t.index});case"UPDATE_DATA_AND_LIST":var i=t.data,c=t.list,u=t.row,l=t.col;return Y(Y({},e),{},{activeIndex:0,list:c,data:i,row:u,col:l,zoom:4/(u>l?u:l)});case"UPDATE_IMAGE_STATE":return Y(Y({},e),t.state);case"UPDATE_STEP":return Y(Y({},e),{},{step:t.step});default:return e}},text:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_PATTERNS":return Q(Q({},e),{},{patterns:t.patterns});default:return e}}});function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var te=Object(T.e)(J,{},Object(T.d)(Object(T.a)(R.a),Object(T.a)((function(e){var t=e.getState;return function(e){return function(r){var n=e(r);return"UPDATE_IMAGE_STATE"!==r.type&&"UPDATE_STEP"!==r.type&&ye(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t().image)),n}}})),D.a)),re={s:[,,1,,,1,1,1,1,1,,1,1,1,,,1,,1,,,,,,,],m:[,,,,,1,,,,,,,,,,,1,,,,,,,,,,1,1,1,,,,,1,1,1,1,1,1,1,1,1,1,1,,1,1,1,1,1,1,1,1,1,,,,1,1,1,1,1,1,1,,,,,,1,1,1,1,1,,,,,,1,1,1,,1,1,1,,,,,1,1,,,,1,1,,,,1,1,,,,,,1,1,,,,,,,,,,,,,],l:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,,,,,,,,,,,,,,,,,,,,,,,1,,,,,,,,,,,,,,,,,,,,,,1,1,1,,,,,,,,,,,,,,,,,,,,,1,1,1,,,,,,,,,,,,,,,,,,,,1,1,1,1,1,,,,,,,,,,,,,,,,,,,1,1,1,1,1,,,,,,,,,,,,,,,,,,1,1,1,1,1,1,1,,,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,,,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,,,,,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,,,,,,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,,,,,,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,,,,,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,,,,,,,,,,,1,1,1,1,1,1,,1,1,1,1,1,1,,,,,,,,,,1,1,1,1,1,,,,,,1,1,1,1,1,,,,,,,,,1,1,1,1,1,,,,,,1,1,1,1,1,,,,,,,,1,1,1,1,,,,,,,,,,1,1,1,1,,,,,,,1,1,,,,,,,,,,,,,,1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,]},ne={s:[1,1,,1,1,1,1,1,1,1,1,1,1,1,1,,1,1,1,,,,1,,,],m:[,,,,,,,,,,,,1,1,1,,,,1,1,1,,1,1,1,1,1,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,,1,1,1,1,1,1,1,1,1,,,,1,1,1,1,1,1,1,,,,,,1,1,1,1,1,,,,,,,,,1,,,,,,,,,,,,,,,,,],l:[,,,,,,,,,,,,,,,,,,,,,,,,,,1,1,1,1,1,,,,,,,,1,1,1,1,1,,,,,,1,1,1,1,1,1,1,,,,,,1,1,1,1,1,1,1,,,,1,1,1,1,1,1,1,1,1,,,,1,1,1,1,1,1,1,1,1,,,1,1,1,1,1,1,1,1,1,1,,1,1,1,1,1,1,1,1,1,1,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,,,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,,,,,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,,,,,,,,,,,,,,1,1,1,1,1,1,1,1,1,,,,,,,,,,,,,,,,1,1,1,1,1,1,1,,,,,,,,,,,,,,,,,,,1,1,1,,,,,,,,,,,,,,,,,,,,,,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,]},ae=function(e,t,r,n,a){e=~~e,r=~~r,t=~~t,n=~~n;for(var o=Math.abs(r-e),i=Math.abs(n-t),c=e<r?1:-1,u=t<n?1:-1,l=o-i;a(e,t),e!==r||t!==n;){var s=2*l;s>-i&&(l-=i,e+=c),s<o&&(l+=o,t+=u)}},oe=function(e,t,r,n,a){for(var o=2*Math.PI,i=0;i<o;i+=.05){var c=Math.round(e+Math.cos(i)*r/2),u=Math.round(t+Math.sin(i)*n/2);a&&a(c,u)}},ie=function(e,t,r,n,a){var o=e<r?1:-1,i=t<n?1:-1,c=e,u=t;for(a(e,t),a(r,n);c!==r;)a(c,t),a(c,n),c+=o;for(;u!==n;)a(e,u),a(r,u),u+=i},ce={s:5,m:11,l:23},ue=function(e){var t=e.x,r=e.y,a=e.callback,o=e.size,i=void 0===o?"m":o,c=e.type,u=ce[i],l=n[void 0===c?"star":c][i],s=Math.floor(u/2),f=Math.floor(u/2),p=t-s,d=r-f;l.forEach((function(e,t){var r=t%u,n=Math.floor(t/u);r+p>=0&&n+d>=0&&r+p<32&&n+d<32&&e&&a(r+p,n+d)}))},le=function(e){var t=e.x,r=e.y,n=e.callback,a=e.pattern,o=Math.sqrt(a.length),i=Math.floor(o/2),c=Math.floor(o/2),u=t-i,l=r-c;a.forEach((function(e,t){var r=t%o,a=Math.floor(t/o);r+u>=0&&a+l>=0&&r+u<32&&a+l<32&&e<3&&n(r+u,a+l,e)}))},se=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=[],n=0;n<e;n+=1)r.push(t);return r};function fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(r),!0).forEach((function(t){de(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var me={activeIndex:0,list:[0],data:{0:{palette:[17,26,35,44,53,62,71,80,89,98,107,116,125,134,142],pattern:se(1024),x:0,y:0,zoom:4}}},he=[],ve=-1,be=["palette","pattern","x","y","zoom"],ye=function(e){delete e.step;var t=JSON.stringify(e);t!==he[ve]&&(localStorage.setItem("pietroStorageData",t),he.push(t),ve+=1,te.dispatch({type:"UPDATE_STEP",step:ve}))},ge=function(){if(ve>0){var e=he[ve-=1];localStorage.setItem("pietroStorageData",e),te.dispatch(_(pe(pe({},JSON.parse(e)),{},{step:ve}))),he.pop()}},Ee=(r(481),r(231)),we=r.n(Ee),Oe=r(527),Ie=r(539),je=r(542),Se=r(234),Ae=r.n(Se),xe=(r(482),r(483),{crop:"icon-crop",qrcode:"icon-qrcode",pen:"icon-pen",folder:"icon-folder",picture:"icon-picture",palette:"icon-palette",pigment:"icon-pigment",bucket:"icon-bucket",move:"icon-move","bucket-all":"icon-bucket-all","mirror-no":"icon-mirror-no","mirror-horizontal":"icon-mirror-horizontal","mirror-vertical":"icon-mirror-vertical","mirror-corner":"icon-mirror-corner",rect:"icon-rect",ellipse:"icon-ellipse",line:"icon-line",stamp:"icon-stamp","heart-l":"icon-heart-l","heart-m":"icon-heart-m","heart-s":"icon-heart-s","star-l":"icon-star-l","star-m":"icon-star-m","star-s":"icon-star-s",github:"icon-github",libary:"icon-archive","step-back":"icon-previous","text-tool":"icon-text-tool","text-edit":"icon-edit-text","convert-img":"icon-convert-img"}),_e={s:"16px",m:"24px",l:"32px"},ke=function(e){var t=e.size,r=void 0===t?"m":t,n=e.style,a=void 0===n?"github":n;return o.a.createElement("div",{className:m()(xe[a]),style:{fontSize:_e[r],lineHeight:1}})};ke.propTypes={};var Ce=ke,Pe=[["#ffffff",parseInt("0f",16)],["#eeeeee",parseInt("1f",16)],["#dddddd",parseInt("2f",16)],["#cccdcc",parseInt("3f",16)],["#bbbbbb",parseInt("4f",16)],["#aaaaaa",parseInt("5f",16)],["#999999",parseInt("6f",16)],["#888888",parseInt("7f",16)],["#777777",parseInt("8f",16)],["#666666",parseInt("9f",16)],["#555555",parseInt("af",16)],["#444444",parseInt("bf",16)],["#333233",parseInt("cf",16)],["#222222",parseInt("df",16)],["#000000",parseInt("ef",16)],["#ffeeff",parseInt("00",16)],["#ff99aa",parseInt("01",16)],["#ee5599",parseInt("02",16)],["#ff66aa",parseInt("03",16)],["#ff0066",parseInt("04",16)],["#bb4477",parseInt("05",16)],["#cc0055",parseInt("06",16)],["#990033",parseInt("07",16)],["#552233",parseInt("08",16)],["#ffbbcc",parseInt("10",16)],["#ff7777",parseInt("11",16)],["#dd3210",parseInt("12",16)],["#ff5544",parseInt("13",16)],["#ff0000",parseInt("14",16)],["#cc6666",parseInt("15",16)],["#bb4444",parseInt("16",16)],["#bb0000",parseInt("17",16)],["#882222",parseInt("18",16)],["#ddcdbb",parseInt("20",16)],["#ffcd66",parseInt("21",16)],["#dd6622",parseInt("22",16)],["#ffaa22",parseInt("23",16)],["#ff6600",parseInt("24",16)],["#bb8855",parseInt("25",16)],["#dd4400",parseInt("26",16)],["#bb4400",parseInt("27",16)],["#663210",parseInt("28",16)],["#ffeedd",parseInt("30",16)],["#ffddcc",parseInt("31",16)],["#ffcdaa",parseInt("32",16)],["#ffbb88",parseInt("33",16)],["#ffaa88",parseInt("34",16)],["#dd8866",parseInt("35",16)],["#bb6644",parseInt("36",16)],["#995533",parseInt("37",16)],["#884422",parseInt("38",16)],["#ffcdff",parseInt("40",16)],["#ee88ff",parseInt("41",16)],["#cc66dd",parseInt("42",16)],["#bb88cc",parseInt("43",16)],["#cc00ff",parseInt("44",16)],["#996699",parseInt("45",16)],["#8800aa",parseInt("46",16)],["#550077",parseInt("47",16)],["#330044",parseInt("48",16)],["#ffbbff",parseInt("50",16)],["#ff99ff",parseInt("51",16)],["#dd22bb",parseInt("52",16)],["#ff55ee",parseInt("53",16)],["#ff00cc",parseInt("54",16)],["#885577",parseInt("55",16)],["#bb0099",parseInt("56",16)],["#880066",parseInt("57",16)],["#550044",parseInt("58",16)],["#ddbb99",parseInt("60",16)],["#ccaa77",parseInt("61",16)],["#774433",parseInt("62",16)],["#aa7744",parseInt("63",16)],["#993200",parseInt("64",16)],["#773222",parseInt("65",16)],["#552200",parseInt("66",16)],["#331000",parseInt("67",16)],["#221000",parseInt("68",16)],["#ffffcc",parseInt("70",16)],["#ffff77",parseInt("71",16)],["#dddd22",parseInt("72",16)],["#ffff00",parseInt("73",16)],["#ffdd00",parseInt("74",16)],["#ccaa00",parseInt("75",16)],["#999900",parseInt("76",16)],["#887700",parseInt("77",16)],["#555500",parseInt("78",16)],["#ddbbff",parseInt("80",16)],["#bb99ee",parseInt("81",16)],["#6632cc",parseInt("82",16)],["#9955ff",parseInt("83",16)],["#6600ff",parseInt("84",16)],["#554488",parseInt("85",16)],["#440099",parseInt("86",16)],["#220066",parseInt("87",16)],["#221033",parseInt("88",16)],["#bbbbff",parseInt("90",16)],["#8899ff",parseInt("91",16)],["#3332aa",parseInt("92",16)],["#3355ee",parseInt("93",16)],["#0000ff",parseInt("94",16)],["#333288",parseInt("95",16)],["#0000aa",parseInt("96",16)],["#101066",parseInt("97",16)],["#000022",parseInt("98",16)],["#99eebb",parseInt("a0",16)],["#66cd77",parseInt("a1",16)],["#226610",parseInt("a2",16)],["#44aa33",parseInt("a3",16)],["#008833",parseInt("a4",16)],["#557755",parseInt("a5",16)],["#225500",parseInt("a6",16)],["#103222",parseInt("a7",16)],["#002210",parseInt("a8",16)],["#ddffbb",parseInt("b0",16)],["#ccff88",parseInt("b1",16)],["#88aa55",parseInt("b2",16)],["#aadd88",parseInt("b3",16)],["#88ff00",parseInt("b4",16)],["#aabb99",parseInt("b5",16)],["#66bb00",parseInt("b6",16)],["#559900",parseInt("b7",16)],["#336600",parseInt("b8",16)],["#bbddff",parseInt("c0",16)],["#77cdff",parseInt("c1",16)],["#335599",parseInt("c2",16)],["#6699ff",parseInt("c3",16)],["#1077ff",parseInt("c4",16)],["#4477aa",parseInt("c5",16)],["#224477",parseInt("c6",16)],["#002277",parseInt("c7",16)],["#001044",parseInt("c8",16)],["#aaffff",parseInt("d0",16)],["#55ffff",parseInt("d1",16)],["#0088bb",parseInt("d2",16)],["#55bbcc",parseInt("d3",16)],["#00cdff",parseInt("d4",16)],["#4499aa",parseInt("d5",16)],["#006688",parseInt("d6",16)],["#004455",parseInt("d7",16)],["#002233",parseInt("d8",16)],["#ccffee",parseInt("e0",16)],["#aaeedd",parseInt("e1",16)],["#33cdaa",parseInt("e2",16)],["#55eebb",parseInt("e3",16)],["#00ffcc",parseInt("e4",16)],["#77aaaa",parseInt("e5",16)],["#00aa99",parseInt("e6",16)],["#008877",parseInt("e7",16)],["#004433",parseInt("e8",16)],["#aaffaa",parseInt("f0",16)],["#77ff77",parseInt("f1",16)],["#66dd44",parseInt("f2",16)],["#00ff00",parseInt("f3",16)],["#22dd22",parseInt("f4",16)],["#55bb55",parseInt("f5",16)],["#00bb00",parseInt("f6",16)],["#008800",parseInt("f7",16)],["#224422",parseInt("f8",16)]],Ne=new Map(Pe),Me=function(e){var t=[0,0,0],r=parseInt(e.slice(1),16);return t[0]=r>>16&255,t[1]=r>>8&255,t[2]=255&r,t},Te=function(e){return"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1)},Re=Pe.map((function(e){return Me(e[0])})),De=function(e){var t,r,n,a=e[0]/255,o=e[1]/255,i=e[2]/255;return r=(.2126*(a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92)+.7152*(o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92)+.0722*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92))/1,n=(.0193*a+.1192*o+.9505*i)/1.08883,t=(t=(.4124*a+.3576*o+.1805*i)/.95047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(t-r),200*(r-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},ze=function(e,t){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],o=Math.sqrt(e[1]*e[1]+e[2]*e[2]),i=o-Math.sqrt(t[1]*t[1]+t[2]*t[2]),c=n*n+a*a-i*i,u=r/1,l=i/(1+.045*o),s=(c=c<0?0:Math.sqrt(c))/(1+.015*o),f=u*u+l*l+s*s;return f<0?0:Math.sqrt(f)},Ue=r(232),Le=r(233),Fe=r.n(Le);function Be(e){return function(e){if(Array.isArray(e))return He(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return He(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return He(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ve(e,t,r,n,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,a)}function Xe(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Ve(o,n,a,i,c,"next",e)}function c(e){Ve(o,n,a,i,c,"throw",e)}i(void 0)}))}}var Ye=function(e){return new Promise((function(t,r){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsDataURL(e)}))},qe=(new Ue.a,function(e){return new Promise(function(){var t=Xe(regeneratorRuntime.mark((function t(r,n){var a,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ye(e);case 2:a=t.sent,(o=new Image).onload=function(){return r(o)},o.src=a;case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}())}),$e=function(e,t){var r=Number.MAX_VALUE,n=-1;return t.forEach((function(t,a){var o=ze(De(e),De(t));o<r&&(r=o,n=a)})),n},Ge=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=[];return t.forEach((function(t,a){for(var o=ze(De(Me(e)),De(Me(t))),i=a,c=0;c<r;c+=1)if(n[c]||(n[c]={index:-1,distance:Number.MAX_VALUE}),o<n[c].distance){var u=n[c].distance,l=n[c].index;n[c]={distance:o,index:i},o=u,i=l}})),n.map((function(e){return e.index}))},Qe=function(e,t){for(var r=new Array,n=Be(t),a=0;a<e.length;a+=1){var o=$e(e[a],n);r.push(o)}return r},We=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[255,255,255],r=e[3]/255;return[(1-r)*t[0]+r*e[0],(1-r)*t[1]+r*e[1],(1-r)*t[2]+r*e[2]]},Ke=function(e,t){for(var r=new Array,n=0;n<e.data.length;n+=4){var a=We(e.data.slice(n,n+4));r.push($e(a,t))}return r},Je={colors:15,method:1,boxSize:[64,64],boxPxls:2,initColors:4096,minHueCols:0,dithKern:null,dithDelta:0,dithSerp:!1,palette:[],reIndex:!1,useCache:!0,cacheFreq:10,colorDist:"euclidean"},Ze=[17,26,35,44,53,62,71,80,89,98,107,116,125,134,142],et=function(e,t,r){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ze,a=[],o={},i=0,c=e?e.width/r:0,u=e?e.height/t:0,l=4/(t>r?t:r),s=0;s<t;s+=1)for(var f=0;f<r;f+=1){var p=se(1024),d=Be(n);if(e){var m=document.createElement("CANVAS"),h=m.getContext("2d"),v=new Fe.a(Je);m.width=32,m.height=32,h.drawImage(e,c*f,u*s,c,u,0,0,32,32),v.sample(h),d=Qe(v.palette(!0),Re),p=v.reduce(h,2)}a.push(i),o[i]={x:f,y:s,palette:d,pattern:p,zoom:l},i+=1}return{list:a,data:o}};r(484);function tt(e,t,r,n,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,a)}function rt(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){tt(o,n,a,i,c,"next",e)}function c(e){tt(o,n,a,i,c,"throw",e)}i(void 0)}))}}function nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return at(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return at(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ot=function(e){var t=e.onClose,r=Object(u.b)(),n=Object(u.c)(w),i=Object(a.useRef)(null),c=Object(a.useRef)(null),l=Object(a.useRef)(null),s=nt(Object(a.useState)(null),2),f=s[0],p=s[1],d=nt(Object(a.useState)({width:100,height:100}),2),m=(d[0],d[1],nt(Object(a.useState)(2),2)),v=m[0],b=m[1],y=nt(Object(a.useState)(2),2),g=y[0],E=y[1],O=function(){var e=rt(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe(i.current.files[0]);case 2:r=e.sent,p(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=rt(regeneratorRuntime.mark((function e(a){var o,i,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=f?l.current.getCroppedCanvas():null,i=et(o,g,v,n),c=i.list,u=i.data,r(x(c,u,g,v)),t();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){l.current&&(l.current.destroy(),l.current=null),l.current=new we.a(c.current,{aspectRatio:v/g,viewMode:1})};return Object(a.useEffect)((function(){f&&j()}),[f]),Object(a.useEffect)((function(){f&&j()}),[v,g]),o.a.createElement("div",{className:"image-converter"},o.a.createElement("div",{className:"image-converter__header"},"匯入圖片進行裁切",o.a.createElement(Oe.a,{className:"image-converter__close-btn",onClick:function(){return t()}},o.a.createElement(Ae.a,null))),o.a.createElement("div",{className:"image-converter__preview"},o.a.createElement("img",{className:"image-converter__input-img",ref:c,src:f&&f.src})),o.a.createElement("div",{className:"image-converter__tool"},o.a.createElement("label",{className:"image-converter__select-wrap"},o.a.createElement("input",{type:"file",accept:".jpg,.jpeg,.png",className:"image-converter__select-input",ref:i,onChange:O}),o.a.createElement(Ce,{style:"folder"})," 匯入"),o.a.createElement("div",{className:"image-converter__crop-count"},"塊數:",o.a.createElement(Ie.a,{labelId:"col-select",value:g,onChange:function(e){return E(e.target.value)}},o.a.createElement(je.a,{value:1},"1"),o.a.createElement(je.a,{value:2},"2"),o.a.createElement(je.a,{value:3},"3"),o.a.createElement(je.a,{value:4},"4")),"x",o.a.createElement(Ie.a,{labelId:"row-select",value:v,onChange:function(e){return b(e.target.value)}},o.a.createElement(je.a,{value:1},"1"),o.a.createElement(je.a,{value:2},"2"),o.a.createElement(je.a,{value:3},"3"),o.a.createElement(je.a,{value:4},"4"))),o.a.createElement(h.a,{onClick:I},o.a.createElement(Ce,{style:"crop"})," 裁切")))};ot.propTypes={};var it=ot,ct=(r(487),function(e){var t=e.index,r=e.data,n=Object(u.b)(),i=Object(a.useRef)(null),c=Object(u.c)(E),l=Object(u.c)(I);return Object(a.useEffect)((function(){var e,t;e=i.current.getContext("2d"),t=r.palette,r.pattern.forEach((function(r,n){var a=n%32,o=Math.floor(n/32),i=t[r];r>-1&&i>-1?(e.fillStyle=Pe[i][0],e.fillRect(a*l,o*l,l,l)):e.clearRect(a*l,o*l,l,l)}))}),[r]),o.a.createElement("div",{className:m()("block",{"block--active":t===c}),onClick:function(){return n(function(e){return{type:"UPDATE_ACTIVE_INDEX",index:e}}(t))}},o.a.createElement("canvas",{ref:i,width:32*l,height:32*l}))});ct.propTypes={};var ut=ct,lt=(r(488),function(e){Object(u.b)();var t=Object(u.c)(y),r=Object(u.c)(g),n=Object(u.c)(S),i=n.col,c=(n.row,Object(u.c)(I));return Object(a.useEffect)((function(){t.length}),[t]),Object(a.useEffect)((function(){}),[]),o.a.createElement("div",{className:"previewer"},o.a.createElement("div",{className:"previewer__block--wrap",style:{width:"".concat((32*c+2)*i,"px")}},t.map((function(e,t){return o.a.createElement(ut,{key:"rwo-".concat(r[e].x,"-").concat(r[e].y),index:t,data:r[e]})}))))});lt.propTypes={};var st=lt,ft=r(237);r(489);function pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var mt=function(e){var t=e.selectedLabel,r=e.itemRender,n=e.options,i=e.onChange,c=e.className,u=pt(Object(a.useState)(null),2),l=u[0],s=u[1],f=function(){s(null)};return o.a.createElement("div",{className:m()("selector",c)},o.a.createElement(h.a,{onClick:function(e){s(e.currentTarget)}},t),o.a.createElement(ft.a,{anchorEl:l,open:Boolean(l),onClose:f},n.map((function(e){return o.a.createElement(je.a,{key:e.key,onClick:function(){return function(e){i(e),f()}(e)}},r(e))}))))};mt.propTypes={};var ht=mt,vt=(r(490),function(e){var t=e.zoom,r=e.hoverCallBack,n=Object(a.useRef)(null),i=Object(a.useRef)(null);return Object(a.useEffect)((function(){n.current&&i.current&&r(n,i)}),[n,i]),o.a.createElement("div",{className:"pattern",onMouseEnter:function(){}},o.a.createElement("canvas",{ref:n,width:32*t,height:32*t}),o.a.createElement("canvas",{ref:i,className:"pattern__preview",width:32*t,height:32*t}))});vt.propTypes={};var bt=vt;r(491);function yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Et=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],wt=[0,1,2,3,4,5,6,7,8],Ot=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],It=function(e){var t=e.paletteIndex,r=Object(u.b)(),n=yt(Object(a.useState)(null),2),i=n[0],c=n[1],l=function(){c(null)},s=function(e){r(function(e,t){return{type:"UPDATE_PALETTE",paletteIndex:e,colorIndex:t}}(t,e)),l()};return Object(a.useEffect)((function(){}),[]),o.a.createElement("div",{className:"color-palette"},o.a.createElement(h.a,{onClick:function(e){c(e.currentTarget)},disabled:-1===t},o.a.createElement(Ce,{style:"pigment"})),o.a.createElement(ft.a,{anchorEl:i,open:Boolean(i),onClose:l},o.a.createElement("div",{className:"color-palette__wrap"},o.a.createElement("div",{className:"color-palette__grey"},Et.map((function(e){return o.a.createElement("div",{key:"".concat(e,"-").concat(Pe[e][0]),className:m()("color-palette__color-block"),onClick:function(){return s(e)},style:{backgroundColor:"".concat(Pe[e][0])}})}))),Ot.map((function(e){return o.a.createElement("div",{key:"color-set-".concat(e)},wt.map((function(t){return o.a.createElement("div",{key:"".concat(e,"-").concat(t,"-").concat(Pe[15+t+9*e][0]),className:m()("color-palette__color-block"),onClick:function(){return s(15+t+9*e)},style:{backgroundColor:"".concat(Pe[15+t+9*e][0])}})})),o.a.createElement("div",{onClick:function(){return t=e,n=wt.map((function(e){return 15+e+9*t})),r(function(e){return{type:"UPDATE_COLOR_SERIE_PALETTE",colorSerie:e}}(n)),void l();var t,n},style:{color:"".concat(Pe[18+9*e][0])}},o.a.createElement(Ce,{style:"palette",size:"s"})))})))))};It.propTypes={};var jt=It,St=(r(492),function(e){var t=e.pickupColor,r=e.paletteIndex,n=e.className,i=(Object(u.b)(),Object(u.c)(w)),c=function(e){t(e)};return Object(a.useEffect)((function(){}),[]),o.a.createElement("div",{className:m()("palette",n)},o.a.createElement("div",{className:"palette__color-wrap"},i.map((function(e,t){return o.a.createElement("div",{key:"".concat(t,"-").concat(e),className:m()("palette__color-block",{"palette__color-block--active":t===r}),onClick:function(){return c(t)},style:{background:"".concat(Pe[e][0])}})})),o.a.createElement("div",{className:m()("palette__color-block",{"palette__color-block--active":-1===r}),onClick:function(){return c(-1)}})),o.a.createElement(jt,{paletteIndex:r}))});St.propTypes={};var At=St,xt=(r(493),function(e){var t=e.label,r=e.icon;return o.a.createElement("div",{className:"icon-label"},o.a.createElement(Ce,{style:r}),o.a.createElement("div",{className:"icon-label__label"},t))});xt.propTypes={};var _t=xt;r(494);function kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ct(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ct(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Pt=function(e){var t=e.selectedStamp,r=e.options,n=e.onSizeChange,i=e.onStampChange,c=kt(Object(a.useState)(["s","m","l"]),2),u=c[0],l=c[1];return o.a.createElement("div",{className:"stamp-selector"},o.a.createElement(ht,{options:r,onChange:function(e){return i((r=e).val),l(r.sizes),void(-1==r.sizes.indexOf(t.size)&&n(r.sizes[0]));var r},selectedLabel:o.a.createElement(Ce,{style:"libary"}),itemRender:function(e){return o.a.createElement(_t,{icon:e.icon,label:e.label})}}),u.map((function(e){return o.a.createElement(Oe.a,{onClick:function(){return function(e){n(e)}(e)},color:e===t.size?"primary":"default"},o.a.createElement(Ce,{style:"".concat(t.type,"-").concat(e)}))})))};Pt.propTypes={};var Nt=Pt,Mt=(r(495),function(e){var t=e.pattern,r=(e.size,e.className),n=Object(a.useRef)(null),i=[14,12,10,8];return Object(a.useEffect)((function(){var e,r;t&&t.length>0&&(e=n.current.getContext("2d"),r=se(1024),le({x:16,y:16,callback:function(e,t,n){r[e+32*t]=n},pattern:t}),r.forEach((function(t,r){var n=r%32,a=Math.floor(r/32),o=i[t];t>-1&&o>-1?(e.fillStyle=Pe[o][0],e.fillRect(n,a,1,1)):e.clearRect(n,a,1,1)})))}),[t]),o.a.createElement("div",{className:m()("text-pattern",r)},o.a.createElement("canvas",{ref:n,width:32,height:32}))});Mt.propTypes={};var Tt=Mt,Rt=r(541),Dt=r(534);function zt(e,t,r,n,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,a)}function Ut(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){zt(o,n,a,i,c,"next",e)}function c(e){zt(o,n,a,i,c,"throw",e)}i(void 0)}))}}var Lt=function(e){var t="";new XMLSerializer;return e.setAttribute("xlink","http://www.w3.org/1999/xlink"),t=(t=(t=(new XMLSerializer).serializeToString(e)).replace(/(\w+)?:?xlink=/g,"xmlns:xlink=")).replace(/NS\d+:href/g,"xlink:href"),new Blob([t],{type:"image/svg+xml"})},Ft=function(e){return new Promise(function(){var t=Ut(regeneratorRuntime.mark((function t(r,n){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=new FileReader).readAsDataURL(e),a.onloadend=function(){r(a.result)};case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}())},Bt=function(e,t){return new Promise(function(){var r=Ut(regeneratorRuntime.mark((function r(n,a){var o,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(t).then((function(e){return e.blob()}));case 2:return o=r.sent,r.next=5,Ft(o);case 5:i=r.sent,n({base64:i,font:e});case 7:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())},Ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise(function(){var t=Ut(regeneratorRuntime.mark((function t(r,n){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=[],t.next=3,Promise.all(e.map((function(e){return Bt(e,e.url)})));case 3:t.sent.forEach((function(e){var t="".concat(e.base64),r="\n        @font-face {\n          font-family: ".concat(e.font.name,";\n          font-style: normal;\n          font-weight: 400;\n          src: url(").concat(t,");\n          unicode-range: ").concat(e.font.unicodeRange,";\n        }\n      ");a.push({name:e.font.name,fontStyle:r})})),r(a);case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}())},Vt=function(){var e=Ut(regeneratorRuntime.mark((function e(t){var r,n,a,o,i,c,u,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:16,n=l.length>2&&void 0!==l[2]?l[2]:[],a="http://www.w3.org/2000/svg",o=document.createElementNS(a,"svg"),i=document.createElementNS(a,"defs"),c=document.createElementNS(a,"g"),u=document.createElementNS(a,"text"),o.setAttributeNS(null,"viewBox","0 0 ".concat(r," ").concat(r)),o.setAttributeNS(null,"width","".concat(r,"px")),o.setAttributeNS(null,"height","".concat(r,"px")),n.length>0&&n.forEach((function(e){var t=document.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e.fontStyle,i.appendChild(t)})),c.setAttributeNS(null,"x",r/2),c.setAttributeNS(null,"y",r/2),c.setAttributeNS(null,"font-size",r),c.setAttributeNS(null,"font-family",n[0]?n[0].name:'"Noto Sans", Roboto, Helvetica, Arial, sans-serif'),u.setAttributeNS(null,"dominant-baseline","text-before-edge"),u.setAttributeNS(null,"text-anchor","start"),u.textContent=t,c.appendChild(u),o.appendChild(i),o.appendChild(c),e.abrupt("return",o);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xt=[[0,0,0],[85,85,85],[170,170,170],[255,255,255]],Yt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,r=arguments.length>2?arguments[2]:void 0;return new Promise(function(){var n=Ut(regeneratorRuntime.mark((function n(a,o){var i,c,u,l,s,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Vt(e,t,r);case 2:return i=n.sent,c=Lt(i),n.next=6,Ft(c);case 6:u=n.sent,l=document.createElement("canvas"),s=l.getContext("2d"),(f=new Image).onload=function(){s.canvas.width=t,s.canvas.height=t,s.drawImage(f,0,0,t,t);var e=s.getImageData(0,0,t,t),r=Ke(e,Xt);a({textPattern:r,svgNode:i})},f.src=u;case 12:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())},qt=function(){var e=Ut(regeneratorRuntime.mark((function e(t,r,n){var a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],o=0;case 2:if(!(o<t.length)){e.next=10;break}return e.next=5,Yt(t[o],r,n);case 5:i=e.sent,a.push(i);case 7:o+=1,e.next=2;break;case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();r(496);function $t(e,t,r,n,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,a)}function Gt(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){$t(o,n,a,i,c,"next",e)}function c(e){$t(o,n,a,i,c,"throw",e)}i(void 0)}))}}function Qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Wt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Kt=[16,18,20,22,24,28],Jt=[{value:null,label:"系統字體"},{value:"font-seto",label:"瀨戶字體"},{value:"font-jf-openhuninn",label:"粉圓體"},{value:"font-kouzansousho",label:"青柳草書"},{value:"font-aoyagireisho",label:"青柳隷書"},{value:"font-hdzb",label:"篆體"}],Zt={"font-seto":{name:"font-seto",url:"font/sp-setofont.woff"},"font-jf-openhuninn":{name:"font-jf-openhuninn",url:"font/jf-openhuninn-11.woff"},"font-hdzb":{name:"font-hdzb",url:"font/zhuanti.woff"},"font-kouzansousho":{name:"font-kouzansousho",url:"font/KouzanBrushFontSousyo.woff"},"font-aoyagireisho":{name:"font-aoyagireisho",url:"font/aoyagireisyosimo_ttf_2_01.woff"}},er=function(e){var t=e.onClose,r=Object(u.b)(),n=Qt(Object(a.useState)("皮耶羅筆刷"),2),i=n[0],c=n[1],l=Qt(Object(a.useState)(Kt[3]),2),s=l[0],f=l[1],p=Qt(Object(a.useState)(Jt[0]),2),d=p[0],v=p[1],b=Qt(Object(a.useState)(!1),2),y=b[0],g=b[1],E=Qt(Object(a.useState)([]),2),w=E[0],O=E[1],I=function(){var e=Gt(regeneratorRuntime.mark((function e(){var t,n,a,o,c,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]&&u[0],g(!0),!d.value){e.next=8;break}return e.next=5,Ht([Zt[d.value]]);case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=[];case 9:return n=e.t0,a=i.trim().replace(/[\n\r|\n|\r\n|\s]/g,""),e.next=13,qt(a,s,n);case 13:o=e.sent,c=o.map((function(e){return e.textPattern})),O(c),t&&r(z(c)),g(!1);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){Gt(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I(!0);case 1:case"end":return e.stop()}}),e)})))()}),[]),o.a.createElement("div",{className:m()("text-editor",{"text-editor--converting":y})},o.a.createElement("div",{className:"text-editor__input-wrap"},o.a.createElement(Rt.a,{label:"文字區塊",value:i,className:"text-editor__input",multiline:!0,variant:"filled",rows:2,onChange:function(e){return c(e.currentTarget.value)}})),o.a.createElement("div",{className:"text-editor__setting-wrap"},"大小:",o.a.createElement(Ie.a,{labelId:"size-select",value:s,onChange:function(e){return f(e.target.value)}},Kt.map((function(e){return o.a.createElement(je.a,{key:e,value:e},e)}))),"字型:",o.a.createElement(Ie.a,{labelId:"family-select",value:d,onChange:function(e){return v(e.target.value)}},Jt.map((function(e){return o.a.createElement(je.a,{key:e.label,value:e},o.a.createElement("span",{style:{fontFamily:e.value}},e.label))})))),o.a.createElement("div",{className:"text-editor__tool-wrap"},o.a.createElement(h.a,{onClick:function(){return I()}},o.a.createElement(Ce,{style:"convert-img"}),"轉換點陣圖")),o.a.createElement("div",{className:"text-editor__pattern-wrap"},w.map((function(e,t){return o.a.createElement(Tt,{key:"pattern-".concat(t),pattern:e,className:"text-editor__pattern"})}))),o.a.createElement("div",{className:"text-editor__tool-wrap"},o.a.createElement(h.a,{onClick:function(){return r(z(w)),void t()}},"確認"),o.a.createElement(h.a,{onClick:function(){t()}},"取消")),y&&o.a.createElement(Dt.a,{className:"text-editor__loader"}))};er.propTypes={};var tr=er,rr=function(e){return Object(b.a)(e,"text.patterns",[])};r(497);function nr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ar(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(r),!0).forEach((function(t){or(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function or(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ir(e){return function(e){if(Array.isArray(e))return lr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ur(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||ur(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ur(e,t){if(e){if("string"==typeof e)return lr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lr(e,t):void 0}}function lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var sr={xl:16,lg:16,md:16,sm:16,xs:8},fr=[],pr=se(1024),dr=[{label:"pen",key:"pen",val:"pen",icon:"pen"},{label:"bucket",key:"bucket",val:"bucket",icon:"bucket"},{label:"stamp",key:"stamp",val:"stamp",icon:"stamp"},{label:"ellipse",key:"ellipse",val:"ellipse",icon:"ellipse"},{label:"rect",key:"rect",val:"rect",icon:"rect"},{label:"line",key:"line",val:"line",icon:"line"},{label:"move",key:"move",val:"move",icon:"move"},{label:"text",key:"text",val:"text",icon:"text-tool"}],mr=[{label:"一般(無鏡相)",key:"mirror-0",val:0,icon:"mirror-no"},{label:"水平鏡像",key:"mirror-1",val:1,icon:"mirror-horizontal"},{label:"垂直鏡像",key:"mirror-2",val:2,icon:"mirror-vertical"},{label:"對角鏡像",key:"mirror-3",val:3,icon:"mirror-corner"}],hr=[{label:"星星",key:"star",val:"star",icon:"star-m",sizes:["s","m","l"]},{label:"愛心",key:"heart",val:"heart",icon:"heart-m",sizes:["s","m","l"]}],vr={pattern:null,preview:null},br=function(e){var t=e.screen,r=Object(u.b)(),n=cr(Object(a.useState)(8),2),i=n[0],c=n[1],l=Object(u.c)(w),s=Object(u.c)(O),f=Object(u.c)(E),p=Object(u.c)(j),d=Object(u.c)(rr),m=cr(Object(a.useState)({x:0,y:0}),2),h=m[0],b=m[1],y=cr(Object(a.useState)({x:0,y:0}),2),g=y[0],I=y[1],S=cr(Object(a.useState)(0),2),x=S[0],_=S[1],k=cr(Object(a.useState)([0,1,2,3]),2),C=k[0],P=k[1],N=cr(Object(a.useState)(!1),2),M=N[0],T=N[1],R=cr(Object(a.useState)({size:"m",type:"star"}),2),D=R[0],z=R[1],U=cr(Object(a.useState)(dr[0].val),2),L=U[0],F=U[1],B=cr(Object(a.useState)(mr[0]),2),H=B[0],V=B[1],X=cr(Object(a.useState)(0),2),Y=X[0],q=X[1],$=cr(Object(a.useState)(!1),2),G=$[0],Q=$[1],W=Object(a.useRef)(null),K=Object(a.useRef)(null),J=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:vr.pattern,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(a){var u=e+32*t,s=l[n];s>-1?(a.fillStyle=Pe[s][0],a.fillRect(e*i,t*i,i,i)):a.clearRect(e*i,t*i,i,i),o&&(fr[u]=n,c&&r(A(fr)))}},Z=function(e){var t=fr[e];return t>-1?t:-1},ee=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=[{x:e,y:t}];switch(H.val){case 1:a.push({x:31-e,y:t});break;case 2:a.push({x:e,y:31-t});break;case 3:a.push({x:31-e,y:t}),a.push({x:e,y:31-t}),a.push({x:31-e,y:31-t})}a.forEach((function(e){J(e.x,e.y,r,vr.pattern,!0,n)}))},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fr,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vr.pattern,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t&&e.forEach((function(e,n){var a=n%32,o=Math.floor(n/32);J(a,o,e,t,r)}))},re=function(e,t){var r=W.current.getBoundingClientRect(),n={x:Math.floor((e-r.x)/i),y:Math.floor((t-r.y)/i)};return b(n),n},ne=function(e,t){T(!0),re(e,t)},ce=function(){T(!1)},se=function(e,t){W.current.getBoundingClientRect();var r,n,a,o,i,c=re(e,t),u=[];if(M)switch(L){case"pen":ee(c.x,c.y,x);break;case"move":r=c.x,n=c.y,a=h.x-r,o=h.y-n,i=new Array(1024),fr.forEach((function(e,t){var r=t%32,n=Math.floor(t/32);(r-=a)>31&&(r-=32),(n-=o)>31&&(n-=32),r<0&&(r=32+r),n<0&&(n=32+n),i[r+32*n]=e})),fr=i,te();break;case"line":u=ir(pr),ae(g.x,g.y,h.x,h.y,(function(e,t){u[e+32*t]=x})),te(u,vr.preview,!1);break;case"ellipse":u=ir(pr);var l=(g.x+h.x)/2,s=(g.y+h.y)/2,f=Math.abs(g.x-h.x),p=Math.abs(g.y-h.y);oe(l,s,f,p,(function(e,t){u[e+32*t]=x})),te(u,vr.preview,!1);break;case"rect":u=ir(pr),ie(g.x,g.y,h.x,h.y,(function(e,t){u[e+32*t]=x})),te(u,vr.preview,!1)}"stamp"===L&&(u=ir(pr),ue({x:c.x,y:c.y,callback:function(e,t){u[e+32*t]=x},size:D.size,type:D.type}),te(u,vr.preview,!1)),"text"===L&&(u=ir(pr),le({x:c.x,y:c.y,callback:function(e,t,r){r<4&&(u[e+32*t]=C[r])},pattern:d[Y]}),te(u,vr.preview,!1))},fe=function(){Q(!1)};return Object(a.useEffect)((function(){c(sr[t])}),[t]),Object(a.useEffect)((function(){if(f>-1&&s){fr=s;var e=Pe[l[x]][0],t=l.map((function(e){return Pe[e][0]}));P(Ge(e,t)),te(fr,vr.pattern,!1)}}),[l]),Object(a.useEffect)((function(){var e=[];if(M)switch(L){case"pen":ee(h.x,h.y,x);break;case"bucket":!function(e,t,r){var n=Z(e+32*t);n!==r&&function e(t,a){t>=0&&t<=31&&a>=0&&a<=31&&n===Z(t+32*a)&&(J(t,a,r,vr.pattern,!0,!1),e(t+1,a),e(t-1,a),e(t,a+1),e(t,a-1))}(e,t),J(e,t,r)}(h.x,h.y,x);break;case"rect":case"ellipse":case"line":I(h)}else switch(L){case"pen":l&&ee(h.x,h.y,x,!0);break;case"line":ae(g.x,g.y,h.x,h.y,(function(t,r){e.push({x:t,y:r})})),te(pr,vr.preview,!1),e.forEach((function(e){J(e.x,e.y,x,vr.pattern,!0,!1)})),J(e[0].x,e[0].y,x);break;case"ellipse":var t=(g.x+h.x)/2,r=(g.y+h.y)/2,n=Math.abs(g.x-h.x),a=Math.abs(g.y-h.y);oe(t,r,n,a,(function(t,r){e.push({x:t,y:r})})),e.forEach((function(e){J(e.x,e.y,x,vr.pattern,!0,!1)})),J(e[0].x,e[0].y,x);break;case"rect":ie(g.x,g.y,h.x,h.y,(function(t,r){e.push({x:t,y:r})})),te(pr,vr.preview,!1),e.forEach((function(e){J(e.x,e.y,x,vr.pattern,!0,!1)})),J(e[0].x,e[0].y,x);break;case"stamp":ue({x:h.x,y:h.y,callback:function(t,r){e.push({x:t,y:r})},size:D.size,type:D.type}),te(pr,vr.preview,!1),e.forEach((function(e){J(e.x,e.y,x,vr.pattern,!0,!1)})),J(e[0].x,e[0].y,x);break;case"text":le({x:h.x,y:h.y,callback:function(t,r,n){n<4&&e.push({x:t,y:r,index:n})},pattern:d[Y]}),te(pr,vr.preview,!1),e.forEach((function(e){J(e.x,e.y,C[e.index],vr.pattern,!0,!1)})),J(e[0].x,e[0].y,C[e[0].index])}}),[M]),Object(a.useEffect)((function(){K.current=f}),[f,s]),o.a.createElement("div",{className:"painter"},f>-1&&o.a.createElement(At,{className:"painter__palette-wrap",pickupColor:function(e){if(e>0){var t=Pe[l[e]][0],r=l.map((function(e){return Pe[e][0]}));P(Ge(t,r))}_(e)},paletteIndex:x}),o.a.createElement("div",{className:"painter__stretcher-wrap"},o.a.createElement("div",{className:"painter__tool"},dr.map((function(e){return o.a.createElement(Oe.a,{key:e.val,onClick:function(){return F(e.val)},color:L===e.val?"primary":"default"},o.a.createElement(Ce,{style:e.icon}))})),o.a.createElement(Oe.a,{disabled:p<1,onClick:ge},o.a.createElement(Ce,{style:"step-back"}))),o.a.createElement("div",{className:"painter__main"},o.a.createElement("div",{className:"painter__stretcher",onTouchStart:function(e){return ne(e.touches[0].clientX,e.touches[0].clientY)},onTouchMove:function(e){return se(e.touches[0].clientX,e.touches[0].clientY)},onTouchEnd:ce,onMouseDown:function(e){return ne(e.clientX,e.clientY)},onMouseUp:ce,onMouseMove:function(e){return se(e.clientX,e.clientY)},ref:W},o.a.createElement(bt,{zoom:i,hoverCallBack:function(e,t){vr.pattern=e.current.getContext("2d"),vr.preview=t.current.getContext("2d")}}),"line"!==L&&f>-1&&o.a.createElement("div",{className:"painter__indicator",style:ar({top:"".concat(h.y*i,"px"),left:"".concat(h.x*i,"px"),width:"".concat(i,"px"),height:"".concat(i,"px")},Pe[l[x]]?{background:"".concat(Pe[l[x]][0])}:{})})),o.a.createElement("div",{className:"painter__sub-tool"},"stamp"===L&&o.a.createElement(Nt,{options:hr,selectedStamp:D,onStampChange:function(e){return z(ar(ar({},D),{},{type:e}))},onSizeChange:function(e){return z(ar(ar({},D),{},{size:e}))}}),"pen"===L&&o.a.createElement(ht,{className:"painter__mirror-selector",options:mr,onChange:function(e){return V(e)},selectedLabel:o.a.createElement(_t,{icon:H.icon,label:H.label}),itemRender:function(e){return o.a.createElement(_t,{icon:e.icon,label:e.label})}}),"text"===L&&o.a.createElement("div",{className:"painter__text-tool"},o.a.createElement(Oe.a,{onClick:function(){return Q(!0)}},o.a.createElement(Ce,{style:"text-edit"})),o.a.createElement("div",{className:"painter__text-patterns"},d.map((function(e,t){return o.a.createElement(Oe.a,{onClick:function(){return q(t)},color:Y===t?"primary":"default"},o.a.createElement(Tt,{pattern:e,size:28}))}))))))),o.a.createElement(v.a,{open:G,onClose:fe,className:"editor__modal",keepMounted:!0},o.a.createElement(tr,{onClose:fe})))};br.propTypes={};var yr,gr=br,Er=function(e){for(var t=new Array,r=0;r<e.length;r++){var n=e.charCodeAt(r);t.push(255&n),t.push(n>>>8)}return t};function wr(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Or(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Or(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw o}}}}function Or(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ir(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Sr(e,t,r){return t&&jr(e.prototype,t),r&&jr(e,r),e}!function(e){var t=function(){function t(e,r,n,a){if(Ir(this,t),this.version=e,this.errorCorrectionLevel=r,this.mask=a,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw"Version value out of range";if(a<-1||a>7)throw"Mask value out of range";this.size=4*e+17;for(var o=[],i=0;i<this.size;i++)o.push(!1);for(var c=0;c<this.size;c++)this.modules.push(o.slice()),this.isFunction.push(o.slice());this.drawFunctionPatterns();var u=this.addEccAndInterleave(n);if(this.drawCodewords(u),-1==a)for(var l=1e9,s=0;s<8;s++){this.applyMask(s),this.drawFormatBits(s);var f=this.getPenaltyScore();f<l&&(a=s,l=f),this.applyMask(s)}if(a<0||a>7)throw"Assertion error";this.mask=a,this.applyMask(a),this.drawFormatBits(a),this.isFunction=[]}return Sr(t,[{key:"getModule",value:function(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}},{key:"drawCanvas",value:function(e,t,r){if(e<=0||t<0)throw"Value out of range";var n=(this.size+2*t)*e;r.width=n,r.height=n;for(var a=r.getContext("2d"),o=-t;o<this.size+t;o++)for(var i=-t;i<this.size+t;i++)a.fillStyle=this.getModule(i,o)?"#000000":"#FFFFFF",a.fillRect((i+t)*e,(o+t)*e,e,e)}},{key:"toSvgString",value:function(e){if(e<0)throw"Border must be non-negative";for(var t=[],r=0;r<this.size;r++)for(var n=0;n<this.size;n++)this.getModule(n,r)&&t.push("M".concat(n+e,",").concat(r+e,"h1v1h-1z"));return'<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '.concat(this.size+2*e," ").concat(this.size+2*e,'" stroke="none">\n\t<rect width="100%" height="100%" fill="#FFFFFF"/>\n\t<path d="').concat(t.join(" "),'" fill="#000000"/>\n</svg>\n')}},{key:"drawFunctionPatterns",value:function(){for(var e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);for(var t=this.getAlignmentPatternPositions(),r=t.length,n=0;n<r;n++)for(var a=0;a<r;a++)0==n&&0==a||0==n&&a==r-1||n==r-1&&0==a||this.drawAlignmentPattern(t[n],t[a]);this.drawFormatBits(0),this.drawVersion()}},{key:"drawFormatBits",value:function(e){for(var t=this.errorCorrectionLevel.formatBits<<3|e,r=t,a=0;a<10;a++)r=r<<1^1335*(r>>>9);var o=21522^(t<<10|r);if(o>>>15!=0)throw"Assertion error";for(var i=0;i<=5;i++)this.setFunctionModule(8,i,n(o,i));this.setFunctionModule(8,7,n(o,6)),this.setFunctionModule(8,8,n(o,7)),this.setFunctionModule(7,8,n(o,8));for(var c=9;c<15;c++)this.setFunctionModule(14-c,8,n(o,c));for(var u=0;u<8;u++)this.setFunctionModule(this.size-1-u,8,n(o,u));for(var l=8;l<15;l++)this.setFunctionModule(8,this.size-15+l,n(o,l));this.setFunctionModule(8,this.size-8,!0)}},{key:"drawVersion",value:function(){if(!(this.version<7)){for(var e=this.version,t=0;t<12;t++)e=e<<1^7973*(e>>>11);var r=this.version<<12|e;if(r>>>18!=0)throw"Assertion error";for(var a=0;a<18;a++){var o=n(r,a),i=this.size-11+a%3,c=Math.floor(a/3);this.setFunctionModule(i,c,o),this.setFunctionModule(c,i,o)}}}},{key:"drawFinderPattern",value:function(e,t){for(var r=-4;r<=4;r++)for(var n=-4;n<=4;n++){var a=Math.max(Math.abs(n),Math.abs(r)),o=e+n,i=t+r;0<=o&&o<this.size&&0<=i&&i<this.size&&this.setFunctionModule(o,i,2!=a&&4!=a)}}},{key:"drawAlignmentPattern",value:function(e,t){for(var r=-2;r<=2;r++)for(var n=-2;n<=2;n++)this.setFunctionModule(e+n,t+r,1!=Math.max(Math.abs(n),Math.abs(r)))}},{key:"setFunctionModule",value:function(e,t,r){this.modules[t][e]=r,this.isFunction[t][e]=!0}},{key:"addEccAndInterleave",value:function(e){var r=this.version,n=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(r,n))throw"Invalid argument";for(var a=t.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][r],o=t.ECC_CODEWORDS_PER_BLOCK[n.ordinal][r],i=Math.floor(t.getNumRawDataModules(r)/8),c=a-i%a,u=Math.floor(i/a),l=[],s=t.reedSolomonComputeDivisor(o),f=0,p=0;f<a;f++){var d=e.slice(p,p+u-o+(f<c?0:1));p+=d.length;var m=t.reedSolomonComputeRemainder(d,s);f<c&&d.push(0),l.push(d.concat(m))}for(var h=[],v=function(e){l.forEach((function(t,r){(e!=u-o||r>=c)&&h.push(t[e])}))},b=0;b<l[0].length;b++)v(b);if(h.length!=i)throw"Assertion error";return h}},{key:"drawCodewords",value:function(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw"Invalid argument";for(var r=0,a=this.size-1;a>=1;a-=2){6==a&&(a=5);for(var o=0;o<this.size;o++)for(var i=0;i<2;i++){var c=a-i,u=0==(a+1&2)?this.size-1-o:o;!this.isFunction[u][c]&&r<8*e.length&&(this.modules[u][c]=n(e[r>>>3],7-(7&r)),r++)}}if(r!=8*e.length)throw"Assertion error"}},{key:"applyMask",value:function(e){if(e<0||e>7)throw"Mask value out of range";for(var t=0;t<this.size;t++)for(var r=0;r<this.size;r++){var n=void 0;switch(e){case 0:n=(r+t)%2==0;break;case 1:n=t%2==0;break;case 2:n=r%3==0;break;case 3:n=(r+t)%3==0;break;case 4:n=(Math.floor(r/3)+Math.floor(t/2))%2==0;break;case 5:n=r*t%2+r*t%3==0;break;case 6:n=(r*t%2+r*t%3)%2==0;break;case 7:n=((r+t)%2+r*t%3)%2==0;break;default:throw"Assertion error"}!this.isFunction[t][r]&&n&&(this.modules[t][r]=!this.modules[t][r])}}},{key:"getPenaltyScore",value:function(){for(var e=0,r=0;r<this.size;r++){for(var n=!1,a=0,o=[0,0,0,0,0,0,0],i=0;i<this.size;i++)this.modules[r][i]==n?5==++a?e+=t.PENALTY_N1:a>5&&e++:(this.finderPenaltyAddHistory(a,o),n||(e+=this.finderPenaltyCountPatterns(o)*t.PENALTY_N3),n=this.modules[r][i],a=1);e+=this.finderPenaltyTerminateAndCount(n,a,o)*t.PENALTY_N3}for(var c=0;c<this.size;c++){for(var u=!1,l=0,s=[0,0,0,0,0,0,0],f=0;f<this.size;f++)this.modules[f][c]==u?5==++l?e+=t.PENALTY_N1:l>5&&e++:(this.finderPenaltyAddHistory(l,s),u||(e+=this.finderPenaltyCountPatterns(s)*t.PENALTY_N3),u=this.modules[f][c],l=1);e+=this.finderPenaltyTerminateAndCount(u,l,s)*t.PENALTY_N3}for(var p=0;p<this.size-1;p++)for(var d=0;d<this.size-1;d++){var m=this.modules[p][d];m==this.modules[p][d+1]&&m==this.modules[p+1][d]&&m==this.modules[p+1][d+1]&&(e+=t.PENALTY_N2)}var h,v=0,b=wr(this.modules);try{for(b.s();!(h=b.n()).done;){v=h.value.reduce((function(e,t){return e+(t?1:0)}),v)}}catch(e){b.e(e)}finally{b.f()}var y=this.size*this.size;return e+=(Math.ceil(Math.abs(20*v-10*y)/y)-1)*t.PENALTY_N4}},{key:"getAlignmentPatternPositions",value:function(){if(1==this.version)return[];for(var e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((this.size-13)/(2*e-2)),r=[6],n=this.size-7;r.length<e;n-=t)r.splice(1,0,n);return r}},{key:"finderPenaltyCountPatterns",value:function(e){var t=e[1];if(t>3*this.size)throw"Assertion error";var r=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(r&&e[0]>=4*t&&e[6]>=t?1:0)+(r&&e[6]>=4*t&&e[0]>=t?1:0)}},{key:"finderPenaltyTerminateAndCount",value:function(e,t,r){return e&&(this.finderPenaltyAddHistory(t,r),t=0),t+=this.size,this.finderPenaltyAddHistory(t,r),this.finderPenaltyCountPatterns(r)}},{key:"finderPenaltyAddHistory",value:function(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}}],[{key:"encodeText",value:function(r,n){var a=e.QrSegment.makeSegments(r);return t.encodeSegments(a,n)}},{key:"encodeBinary",value:function(r,n){var a=e.QrSegment.makeBytes(r);return t.encodeSegments([a],n)}},{key:"encodeSegments",value:function(e,n){var o,i,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(!(t.MIN_VERSION<=c&&c<=u&&u<=t.MAX_VERSION)||l<-1||l>7)throw"Invalid value";for(o=c;;o++){var f=8*t.getNumDataCodewords(o,n),p=a.getTotalBits(e,o);if(p<=f){i=p;break}if(o>=u)throw"Data too long"}for(var d=0,m=[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH];d<m.length;d++){var h=m[d];s&&i<=8*t.getNumDataCodewords(o,h)&&(n=h)}var v,b=[],y=wr(e);try{for(y.s();!(v=y.n()).done;){var g=v.value;r(g.mode.modeBits,4,b),r(g.numChars,g.mode.numCharCountBits(o),b);var E,w=wr(g.getData());try{for(w.s();!(E=w.n()).done;){var O=E.value;b.push(O)}}catch(e){w.e(e)}finally{w.f()}}}catch(e){y.e(e)}finally{y.f()}if(b.length!=i)throw"Assertion error";var I=8*t.getNumDataCodewords(o,n);if(b.length>I)throw"Assertion error";if(r(0,Math.min(4,I-b.length),b),r(0,(8-b.length%8)%8,b),b.length%8!=0)throw"Assertion error";for(var j=236;b.length<I;j^=253)r(j,8,b);for(var S=[];8*S.length<b.length;)S.push(0);return b.forEach((function(e,t){return S[t>>>3]|=e<<7-(7&t)})),new t(o,n,S,l)}},{key:"getNumRawDataModules",value:function(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw"Version number out of range";var r=(16*e+128)*e+64;if(e>=2){var n=Math.floor(e/7)+2;r-=(25*n-10)*n-55,e>=7&&(r-=36)}if(!(208<=r&&r<=29648))throw"Assertion error";return r}},{key:"getNumDataCodewords",value:function(e,r){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[r.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][e]}},{key:"reedSolomonComputeDivisor",value:function(e){if(e<1||e>255)throw"Degree out of range";for(var r=[],n=0;n<e-1;n++)r.push(0);r.push(1);for(var a=1,o=0;o<e;o++){for(var i=0;i<r.length;i++)r[i]=t.reedSolomonMultiply(r[i],a),i+1<r.length&&(r[i]^=r[i+1]);a=t.reedSolomonMultiply(a,2)}return r}},{key:"reedSolomonComputeRemainder",value:function(e,r){var n,a=r.map((function(e){return 0})),o=wr(e);try{var i=function(){var e=n.value^a.shift();a.push(0),r.forEach((function(r,n){return a[n]^=t.reedSolomonMultiply(r,e)}))};for(o.s();!(n=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}return a}},{key:"reedSolomonMultiply",value:function(e,t){if(e>>>8!=0||t>>>8!=0)throw"Byte out of range";for(var r=0,n=7;n>=0;n--)r=r<<1^285*(r>>>7),r^=(t>>>n&1)*e;if(r>>>8!=0)throw"Assertion error";return r}}]),t}();function r(e,t,r){if(t<0||t>31||e>>>t!=0)throw"Value out of range";for(var n=t-1;n>=0;n--)r.push(e>>>n&1)}function n(e,t){return 0!=(e>>>t&1)}t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;var a=function(){function e(t,r,n){if(Ir(this,e),this.mode=t,this.numChars=r,this.bitData=n,r<0)throw"Invalid argument";this.bitData=n.slice()}return Sr(e,[{key:"getData",value:function(){return this.bitData.slice()}}],[{key:"makeBytes",value:function(t){var n,a=[],o=wr(t);try{for(o.s();!(n=o.n()).done;){r(n.value,8,a)}}catch(e){o.e(e)}finally{o.f()}return new e(e.Mode.BYTE,t.length,a)}},{key:"makeNumeric",value:function(t){if(!this.NUMERIC_REGEX.test(t))throw"String contains non-numeric characters";for(var n=[],a=0;a<t.length;){var o=Math.min(t.length-a,3);r(parseInt(t.substr(a,o),10),3*o+1,n),a+=o}return new e(e.Mode.NUMERIC,t.length,n)}},{key:"makeAlphanumeric",value:function(t){if(!this.ALPHANUMERIC_REGEX.test(t))throw"String contains unencodable characters in alphanumeric mode";var n,a=[];for(n=0;n+2<=t.length;n+=2){var o=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n));r(o+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n+1)),11,a)}return n<t.length&&r(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n)),6,a),new e(e.Mode.ALPHANUMERIC,t.length,a)}},{key:"makeSegments",value:function(t){return""==t?[]:this.NUMERIC_REGEX.test(t)?[e.makeNumeric(t)]:this.ALPHANUMERIC_REGEX.test(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]}},{key:"makeEci",value:function(t){var n=[];if(t<0)throw"ECI assignment value out of range";if(t<128)r(t,8,n);else if(t<16384)r(2,2,n),r(t,14,n);else{if(!(t<1e6))throw"ECI assignment value out of range";r(6,3,n),r(t,21,n)}return new e(e.Mode.ECI,0,n)}},{key:"getTotalBits",value:function(e,t){var r,n=0,a=wr(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,i=o.mode.numCharCountBits(t);if(o.numChars>=1<<i)return 1/0;n+=4+i+o.bitData.length}}catch(e){a.e(e)}finally{a.f()}return n}},{key:"toUtf8ByteArray",value:function(e){e=encodeURI(e);for(var t=[],r=0;r<e.length;r++)"%"!=e.charAt(r)?t.push(e.charCodeAt(r)):(t.push(parseInt(e.substr(r+1,2),16)),r+=2);return t}}]),e}();a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.QrSegment=a}(yr||(yr={})),function(e){!function(e){var t=function e(t,r){Ir(this,e),this.ordinal=t,this.formatBits=r};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t}(e.QrCode||(e.QrCode={}))}(yr||(yr={})),function(e){!function(e){var t=function(){function e(t,r){Ir(this,e),this.modeBits=t,this.numBitsCharCount=r}return Sr(e,[{key:"numCharCountBits",value:function(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}}]),e}();t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t}(e.QrSegment||(e.QrSegment={}))}(yr||(yr={}));var Ar=yr,xr=function(e){return Object(b.a)(e,"author.title")},_r=function(e){return Object(b.a)(e,"author.author")},kr=function(e){return Object(b.a)(e,"author.town")};r(498);function Cr(e){return function(e){if(Array.isArray(e))return Mr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Nr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||Nr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nr(e,t){if(e){if("string"==typeof e)return Mr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Mr(e,t):void 0}}function Mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Tr=Ar.QrCode,Rr=function(e){var t=e.author,r=e.title,n=e.onClose,i=Object(u.b)(),c=Pr(Object(a.useState)(""),2),l=c[0],s=c[1],f=Pr(Object(a.useState)(""),2),p=f[0],d=f[1];return Object(a.useEffect)((function(){s(r),d(t)}),[]),o.a.createElement("div",{className:"author-edit-modal"},o.a.createElement(Rt.a,{label:"標題",value:l,className:"author-edit-modal__input",onChange:function(e){return s(e.currentTarget.value)}}),o.a.createElement(Rt.a,{label:"作者",value:p,onChange:function(e){return d(e.currentTarget.value)},className:"author-edit-modal__input"}),o.a.createElement("div",{className:"author-edit-modal__tool"},o.a.createElement(h.a,{onClick:function(){i({type:"UPDATE_AUTHOR_INFO",info:{title:l,author:p}}),n()}},"儲存"),o.a.createElement(h.a,{onClick:function(){n()}},"取消")))},Dr=function(e){var t=e.onClose,r=(Object(u.b)(),Object(u.c)(w)),n=Object(u.c)(O),i=Object(u.c)(E),c=Object(u.c)(xr),l=Object(u.c)(_r),s=Object(u.c)(kr),f=Pr(Object(a.useState)(!1),2),p=f[0],d=f[1],m=Object(a.useRef)(null),b=Object(a.useRef)(null),y=function(){var e=new Array,t=new Array;r.forEach((function(t){var r=Me(Pe[t][0]);e.push([].concat(Cr(r),[255]))})),n.forEach((function(r){t=t.concat(e[r]?e[r]:[0,0,0,0])}));var a=new ImageData(new Uint8ClampedArray(t),32,32),o=function(e){var t=e.title,r=e.author,n=e.town,a=e.palette,o=e.imageData,i=Er(t),c=Er(r),u=Er(n),l=new Array;l=l.concat(i);for(var s=i.length;s<40;s++)l.push(0);l=(l=l.concat([0,0,182,236])).concat(c);for(var f=c.length;f<18;f++)l.push(0);l=(l=l.concat([0,0,68,197])).concat(u);for(var p=u.length;p<18;p++)l.push(0);l=l.concat([0,0,25,49]);for(var d=new Map,m=0;m<a.length;m++){var h=Te(a[m]);d.set(h,m);var v=Ne.get(h);l.push(v)}l=l.concat([204,10,9,0,0]);for(var b=o.data,y=0;y<b.length;y+=8){var g=[b[y+0],b[y+1],b[y+2],b[y+3]],E=[b[y+4],b[y+5],b[y+6],b[y+7]],w=void 0;w=0==g[3]?15:d.get(Te([g[0],g[1],g[2]]));var O=void 0;O=0==E[3]?15:d.get(Te([E[0],E[1],E[2]])),l.push(16*O+w)}return l}({title:c,author:l,town:s,imageData:a,palette:e});Tr.encodeSegments([Ar.QrSegment.makeBytes(o)],Tr.Ecc.MEDIUM,19,19).drawCanvas(2,2,b.current)},g=function(){d(!1)};return Object(a.useEffect)((function(){var e;i>-1&&n&&r&&(e=m.current.getContext("2d"),n.forEach((function(t,n){var a=n%32,o=Math.floor(n/32),i=r[t];t>-1&&i>-1?(e.fillStyle=Pe[i][0],e.fillRect(4*a,4*o,4,4)):e.clearRect(4*a,4*o,4,4)})),y())}),[n,r]),Object(a.useEffect)((function(){i>-1&&n&&r&&y()}),[c,l]),o.a.createElement("div",{className:"qr-generator"},o.a.createElement("div",{className:"qr-generator__author-information"},o.a.createElement("div",{className:"qr-generator__author-title"},c),o.a.createElement("div",{className:"qr-generator__author-name"},l),o.a.createElement(h.a,{className:"qr-generator__author-edit-btn",onClick:function(){return d(!0)}},o.a.createElement(Ce,{style:"pen"}))),o.a.createElement("div",{className:"qr-generator__block"},o.a.createElement("canvas",{ref:m,width:128,height:128})),o.a.createElement("div",{className:"qr-generator__qr-code"},o.a.createElement("canvas",{ref:b})),o.a.createElement(h.a,{onClick:t},"關閉視窗"),o.a.createElement(v.a,{open:p,onClose:g,className:"qr-generator__modal",keepMounted:!0},o.a.createElement(Rr,{author:l,title:c,onClose:g})))};Dr.propTypes={};var zr=Dr;r(499);function Ur(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Lr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Fr=function(e){var t=Object(u.b)(),r=Ur(Object(a.useState)(!1),2),n=r[0],i=r[1],c=Ur(Object(a.useState)(!1),2),l=c[0],s=c[1],f=N(),p=function(){i(!1)},d=function(){s(!1)};return Object(a.useEffect)((function(){var e=function(){var e,t,r=!1;try{t=localStorage.getItem("pietroStorageData"),(e=JSON.parse(t)).list.forEach((function(t){var r=e.data[t];be.forEach((function(e){if(!r.hasOwnProperty(e))throw Error("missing key: ".concat(e))}))}))}catch(e){M.a(e),console.log(e),r=!0}return t&&!r||(t=JSON.stringify(me),e=me,localStorage.setItem("pietroStorageData",t)),he=[t],ve=0,e.step=0,e}();t(_(e))}),[]),o.a.createElement("div",{className:"editor"},o.a.createElement("div",{className:"editor__wrap"},o.a.createElement(gr,{screen:f}),o.a.createElement("aside",{className:"editor__aside"},o.a.createElement(st,null),o.a.createElement("div",{className:"editor__aside--tool"},o.a.createElement(h.a,{onClick:function(){i(!0)}},o.a.createElement(Ce,{style:"crop"})," 裁切匯入圖片"),o.a.createElement(h.a,{onClick:function(){s(!0)}},o.a.createElement(Ce,{style:"qrcode"})," 生成QR code")))),o.a.createElement(v.a,{open:n,onClose:p,className:"editor__modal",keepMounted:!0},o.a.createElement(it,{onClose:p})),o.a.createElement(v.a,{open:l,onClose:d,className:"editor__modal",keepMounted:!0},o.a.createElement(zr,{onClose:d})))};Fr.propTypes={};var Br=Fr,Hr=r(236);function Vr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vr(Object(r),!0).forEach((function(t){Yr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Yr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qr=Xr(Xr({},Object(Hr.a)({palette:{text:{primary:"#665042"}},typography:{useNextVariants:!0,fontFamily:'"Noto Sans", Roboto, Helvetica, Arial, sans-serif',button:{textTransform:"none"},h1:{fontSize:40,fontWeight:"bold"},h2:{fontSize:32,fontWeight:"bold"},h3:{fontSize:24,fontWeight:"bold"},h4:{fontSize:16,fontWeight:"bold"},overline:{textTransform:"none"}}})),{},{overrides:{MuiButton:{root:{lineHeight:1,minWidth:24,borderRadius:0}},MuiIconButton:{root:{padding:6},colorPrimary:{color:"#f2f0d9",backgroundColor:"#12c3b9","&:hover":{backgroundColor:"#12c3b9","@media (hover: none)":{backgroundColor:"#12c3b9"}}}}}});Object(p.a)(window);s.a({dsn:"https://d45502e3d91647baaf14421f64fc61f1@o437865.ingest.sentry.io/5400910",integrations:[new f.a.Tracing],tracesSampleRate:1});var $r=function(){return o.a.createElement(u.a,{store:te},o.a.createElement(l.a,{theme:qr},o.a.createElement(Br,null)))};c.a.render(o.a.createElement($r,null),document.getElementById("root"))}});