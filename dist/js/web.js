!function(e){function t(t){for(var n,i,c=t[0],u=t[1],s=t[2],f=0,p=[];f<c.length;f++)i=c[f],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);for(l&&l(t);p.length;)p.shift()();return o.push.apply(o,s||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,c=1;c<r.length;c++){var u=r[c];0!==a[u]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={1:0},o=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var l=u;o.push([468,0]),r()}({450:function(e,t,r){},452:function(e,t,r){},453:function(e,t,r){},454:function(e,t,r){},455:function(e,t,r){},456:function(e,t,r){},457:function(e,t,r){},458:function(e,t,r){},459:function(e,t,r){},460:function(e,t,r){},461:function(e,t,r){},462:function(e,t,r){},463:function(e,t,r){},464:function(e,t,r){},467:function(e,t,r){},468:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"star",(function(){return $})),r.d(n,"heart",(function(){return W}));r(223),r(224),r(225),r(226),r(227),r(228),r(229),r(230),r(231),r(232),r(233),r(234),r(235),r(236),r(237),r(238),r(239),r(240),r(241),r(242),r(243),r(244),r(245),r(246),r(247),r(248),r(249),r(250),r(100),r(251),r(252),r(253),r(254),r(255),r(256),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(265),r(267),r(268),r(269),r(270),r(271),r(273),r(274),r(276),r(277),r(278),r(279),r(280),r(281),r(282),r(283),r(284),r(285),r(286),r(287),r(288),r(289),r(291),r(292),r(293),r(294),r(295),r(296),r(297),r(298),r(299),r(300),r(301),r(302),r(303),r(305),r(306),r(307),r(308),r(309),r(310),r(311),r(312),r(313),r(314),r(315),r(316),r(317),r(318),r(319),r(320),r(321),r(322),r(323),r(324),r(325),r(326),r(327),r(328),r(329),r(330),r(331),r(332),r(333),r(334),r(335),r(336),r(337),r(339),r(340),r(341),r(342),r(345),r(346),r(347),r(348),r(349),r(350),r(351),r(352),r(353),r(354),r(355),r(356),r(357),r(358),r(359),r(190),r(360),r(361),r(362),r(363),r(364),r(365),r(366),r(191),r(367),r(368),r(369),r(370),r(371),r(372),r(373),r(374),r(375),r(376),r(377),r(378),r(379),r(380),r(381),r(382),r(383),r(384),r(385),r(386),r(387),r(388),r(389),r(390),r(391),r(392),r(394),r(395),r(396),r(397),r(398),r(399),r(400),r(401),r(402),r(403),r(404),r(405),r(406),r(407),r(408),r(409),r(410),r(411),r(412),r(413),r(414),r(415),r(416),r(417),r(418),r(419),r(420),r(421),r(422),r(423),r(424),r(425),r(426),r(427),r(428),r(429),r(430),r(431),r(432),r(433),r(434),r(437),r(198);var a=r(0),o=r.n(a),i=r(18),c=r.n(i),u=r(9),s=r(500),l=r(214),f=(r(449),r(450),r(5),r(24)),p=r.n(f),h=r(498),d=r(502),v=r(31),m=function(e){return Object(v.a)(e,"image.list")},b=function(e){return Object(v.a)(e,"image.data")},y=function(e){return Object(v.a)(e,"image.activeIndex")},g=function(e){var t=y(e);return Object(v.a)(e,"image.data.".concat(t,".palette"))},I=function(e){var t=y(e);return Object(v.a)(e,"image.data.".concat(t,".pattern"))},E=function(e){return Object(v.a)(e,"image.zoom")},w=function(e){return Object(v.a)(e,"image.step")},O=function(e){return{col:Object(v.a)(e,"image.col"),row:Object(v.a)(e,"image.row")}},j=function(e){return{type:"UPDATE_PATTERN",pattern:e}},A=function(e,t,r,n){return{type:"UPDATE_DATA_AND_LIST",list:e,data:t,row:r,col:n}},S=function(e){return{type:"UPDATE_IMAGE_STATE",state:e}};function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var M=function(){var e="object"===("undefined"==typeof window?"undefined":P(window)),t=C(Object(a.useState)("xl"),2),r=t[0],n=t[1];return Object(a.useEffect)((function(){if(!e)return!1;var t=function(){var t={width:e?window.innerWidth:void 0,height:e?window.innerHeight:void 0}.width,r="xl";t>=960&&t<1200?r="lg":t>=768&&t<960?r="md":t>=576&&t<768?r="sm":t<576&&(r="xs"),n(r)};return t(),window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),r},_=r(54),x=r(206),N=r(207);function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var z={title:"",author:"",town:""};function U(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){H(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function H(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var V={activeIndex:-1,col:1,row:1,zoom:4,list:[],data:{},listUpdateBy:"",step:-1};var Y=Object(_.c)({author:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_TITLE":return R(R({},e),{},{title:t.title});case"UPDATE_AUTHOR":return R(R({},e),{},{author:t.author});case"UPDATE_TOWN":return R(R({},e),{},{town:t.town});case"UPDATE_AUTHOR_INFO":return R(R({},e),t.info);default:return e}},image:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_PATTERN":return B(B({},e),{},{data:B(B({},e.data),{},H({},e.activeIndex,B(B({},e.data[e.activeIndex]),{},{pattern:U(t.pattern)})))});case"UPDATE_PALETTE":var r=U(e.data[e.activeIndex].palette),n=t.paletteIndex,a=t.colorIndex,o=r.indexOf(a);return o>-1&&o!==n&&(r[o]=r[n]),r[n]=a,B(B({},e),{},{data:B(B({},e.data),{},H({},e.activeIndex,B(B({},e.data[e.activeIndex]),{},{palette:r})))});case"UPDATE_ACTIVE_INDEX":return B(B({},e),{},{activeIndex:t.index});case"UPDATE_DATA_AND_LIST":var i=t.data,c=t.list,u=t.row,s=t.col;return B(B({},e),{},{activeIndex:0,list:c,data:i,row:u,col:s,zoom:4/(u>s?u:s)});case"UPDATE_IMAGE_STATE":return B(B({},e),t.state);case"UPDATE_STEP":return B(B({},e),{},{step:t.step});default:return e}}});function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Q=Object(_.e)(Y,{},Object(_.d)(Object(_.a)(x.a),Object(_.a)((function(e){var t=e.getState;return function(e){return function(r){var n=e(r);return console.log("state after dispatch",t(),r),"UPDATE_IMAGE_STATE"!==r.type&&"UPDATE_STEP"!==r.type&&ue(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){G(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t().image)),n}}})),N.a)),$={s:[,,1,,,1,1,1,1,1,,1,1,1,,,1,,1,,,,,,,],m:[,,,,,1,,,,,,,,,,,1,,,,,,,,,,1,1,1,,,,,1,1,1,1,1,1,1,1,1,1,1,,1,1,1,1,1,1,1,1,1,,,,1,1,1,1,1,1,1,,,,,,1,1,1,1,1,,,,,,1,1,1,,1,1,1,,,,,1,1,,,,1,1,,,,1,1,,,,,,1,1,,,,,,,,,,,,,],l:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,,,,,,,,,,,,,,,,,,,,,,,1,,,,,,,,,,,,,,,,,,,,,,1,1,1,,,,,,,,,,,,,,,,,,,,,1,1,1,,,,,,,,,,,,,,,,,,,,1,1,1,1,1,,,,,,,,,,,,,,,,,,,1,1,1,1,1,,,,,,,,,,,,,,,,,,1,1,1,1,1,1,1,,,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,,,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,,,,,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,,,,,,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,,,,,,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,,,,,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,,,,,,,,,,,1,1,1,1,1,1,,1,1,1,1,1,1,,,,,,,,,,1,1,1,1,1,,,,,,1,1,1,1,1,,,,,,,,,1,1,1,1,1,,,,,,1,1,1,1,1,,,,,,,,1,1,1,1,,,,,,,,,,1,1,1,1,,,,,,,1,1,,,,,,,,,,,,,,1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,]},W={s:[1,1,,1,1,1,1,1,1,1,1,1,1,1,1,,1,1,1,,,,1,,,],m:[,,,,,,,,,,,,1,1,1,,,,1,1,1,,1,1,1,1,1,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,,1,1,1,1,1,1,1,1,1,,,,1,1,1,1,1,1,1,,,,,,1,1,1,1,1,,,,,,,,,1,,,,,,,,,,,,,,,,,],l:[,,,,,,,,,,,,,,,,,,,,,,,,,,1,1,1,1,1,,,,,,,,1,1,1,1,1,,,,,,1,1,1,1,1,1,1,,,,,,1,1,1,1,1,1,1,,,,1,1,1,1,1,1,1,1,1,,,,1,1,1,1,1,1,1,1,1,,,1,1,1,1,1,1,1,1,1,1,,1,1,1,1,1,1,1,1,1,1,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,,,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,,,,,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,,,,,,,,,,,,,,1,1,1,1,1,1,1,1,1,,,,,,,,,,,,,,,,1,1,1,1,1,1,1,,,,,,,,,,,,,,,,,,,1,1,1,,,,,,,,,,,,,,,,,,,,,,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,]},q=function(e,t,r,n,a){e=~~e,r=~~r,t=~~t,n=~~n;for(var o=Math.abs(r-e),i=Math.abs(n-t),c=e<r?1:-1,u=t<n?1:-1,s=o-i;a(e,t),e!==r||t!==n;){var l=2*s;l>-i&&(s-=i,e+=c),l<o&&(s+=o,t+=u)}},K=function(e,t,r,n,a){for(var o=2*Math.PI,i=0;i<o;i+=.05){var c=Math.round(e+Math.cos(i)*r/2),u=Math.round(t+Math.sin(i)*n/2);a&&a(c,u)}},J=function(e,t,r,n,a){var o=e<r?1:-1,i=t<n?1:-1,c=e,u=t;for(a(e,t),a(r,n);c!==r;)a(c,t),a(c,n),c+=o;for(;u!==n;)a(e,u),a(r,u),u+=i},Z={s:5,m:11,l:23},ee=function(e){var t=e.x,r=e.y,a=e.callback,o=e.size,i=void 0===o?"m":o,c=e.type,u=Z[i],s=n[void 0===c?"star":c][i],l=Math.floor(u/2),f=Math.floor(u/2),p=t-l,h=r-f;s.forEach((function(e,t){var r=t%u,n=Math.floor(t/u);r+p>=0&&n+h>=0&&r+p<32&&n+h<32&&e&&a(r+p,n+h)}))},te=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=[],n=0;n<e;n+=1)r.push(t);return r};function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){ae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var oe={activeIndex:0,list:[0],data:{0:{palette:[17,26,35,44,53,62,71,80,89,98,107,116,125,134,142],pattern:te(1024),x:0,y:0,zoom:4}}},ie=[],ce=-1,ue=function(e){delete e.step;var t=JSON.stringify(e);t!==ie[ce]&&(localStorage.setItem("pietroStorageData",t),ie.push(t),ce+=1,console.log("Save to Storage!"),Q.dispatch({type:"UPDATE_STEP",step:ce}))},se=function(){if(ce>0){var e=ie[ce-=1];localStorage.setItem("pietroStorageData",e),Q.dispatch(S(ne(ne({},JSON.parse(e)),{},{step:ce}))),ie.pop()}},le=(r(451),r(208)),fe=r.n(le),pe=r(501),he=r(504),de=(r(452),r(453),{crop:"icon-crop",qrcode:"icon-qrcode",pen:"icon-pen",folder:"icon-folder",picture:"icon-picture",palette:"icon-palette",pigment:"icon-pigment",bucket:"icon-bucket",move:"icon-move","bucket-all":"icon-bucket-all","mirror-no":"icon-pen","mirror-horizontal":"icon-mirror-horizontal","mirror-vertical":"icon-mirror-vertical","mirror-corner":"icon-mirror-corner",rect:"icon-rect",ellipse:"icon-ellipse",line:"icon-line",stamp:"icon-stamp","heart-l":"icon-heart-l","heart-m":"icon-heart-m","heart-s":"icon-heart-s","star-l":"icon-star-l","star-m":"icon-star-m","star-s":"icon-star-s",github:"icon-github",libary:"icon-archive"}),ve={s:"16px",m:"24px",l:"32px"},me=function(e){var t=e.size,r=void 0===t?"m":t,n=e.style,a=void 0===n?"github":n;return o.a.createElement("div",{className:p()(de[a]),style:{fontSize:ve[r],lineHeight:1}})};me.propTypes={};var be=me,ye=[["#ffffff",parseInt("0f",16)],["#eeeeee",parseInt("1f",16)],["#dddddd",parseInt("2f",16)],["#cccdcc",parseInt("3f",16)],["#bbbbbb",parseInt("4f",16)],["#aaaaaa",parseInt("5f",16)],["#999999",parseInt("6f",16)],["#888888",parseInt("7f",16)],["#777777",parseInt("8f",16)],["#666666",parseInt("9f",16)],["#555555",parseInt("af",16)],["#444444",parseInt("bf",16)],["#333233",parseInt("cf",16)],["#222222",parseInt("df",16)],["#000000",parseInt("ef",16)],["#ffeeff",parseInt("00",16)],["#ff99aa",parseInt("01",16)],["#ee5599",parseInt("02",16)],["#ff66aa",parseInt("03",16)],["#ff0066",parseInt("04",16)],["#bb4477",parseInt("05",16)],["#cc0055",parseInt("06",16)],["#990033",parseInt("07",16)],["#552233",parseInt("08",16)],["#ffbbcc",parseInt("10",16)],["#ff7777",parseInt("11",16)],["#dd3210",parseInt("12",16)],["#ff5544",parseInt("13",16)],["#ff0000",parseInt("14",16)],["#cc6666",parseInt("15",16)],["#bb4444",parseInt("16",16)],["#bb0000",parseInt("17",16)],["#882222",parseInt("18",16)],["#ddcdbb",parseInt("20",16)],["#ffcd66",parseInt("21",16)],["#dd6622",parseInt("22",16)],["#ffaa22",parseInt("23",16)],["#ff6600",parseInt("24",16)],["#bb8855",parseInt("25",16)],["#dd4400",parseInt("26",16)],["#bb4400",parseInt("27",16)],["#663210",parseInt("28",16)],["#ffeedd",parseInt("30",16)],["#ffddcc",parseInt("31",16)],["#ffcdaa",parseInt("32",16)],["#ffbb88",parseInt("33",16)],["#ffaa88",parseInt("34",16)],["#dd8866",parseInt("35",16)],["#bb6644",parseInt("36",16)],["#995533",parseInt("37",16)],["#884422",parseInt("38",16)],["#ffcdff",parseInt("40",16)],["#ee88ff",parseInt("41",16)],["#cc66dd",parseInt("42",16)],["#bb88cc",parseInt("43",16)],["#cc00ff",parseInt("44",16)],["#996699",parseInt("45",16)],["#8800aa",parseInt("46",16)],["#550077",parseInt("47",16)],["#330044",parseInt("48",16)],["#ffbbff",parseInt("50",16)],["#ff99ff",parseInt("51",16)],["#dd22bb",parseInt("52",16)],["#ff55ee",parseInt("53",16)],["#ff00cc",parseInt("54",16)],["#885577",parseInt("55",16)],["#bb0099",parseInt("56",16)],["#880066",parseInt("57",16)],["#550044",parseInt("58",16)],["#ddbb99",parseInt("60",16)],["#ccaa77",parseInt("61",16)],["#774433",parseInt("62",16)],["#aa7744",parseInt("63",16)],["#993200",parseInt("64",16)],["#773222",parseInt("65",16)],["#552200",parseInt("66",16)],["#331000",parseInt("67",16)],["#221000",parseInt("68",16)],["#ffffcc",parseInt("70",16)],["#ffff77",parseInt("71",16)],["#dddd22",parseInt("72",16)],["#ffff00",parseInt("73",16)],["#ffdd00",parseInt("74",16)],["#ccaa00",parseInt("75",16)],["#999900",parseInt("76",16)],["#887700",parseInt("77",16)],["#555500",parseInt("78",16)],["#ddbbff",parseInt("80",16)],["#bb99ee",parseInt("81",16)],["#6632cc",parseInt("82",16)],["#9955ff",parseInt("83",16)],["#6600ff",parseInt("84",16)],["#554488",parseInt("85",16)],["#440099",parseInt("86",16)],["#220066",parseInt("87",16)],["#221033",parseInt("88",16)],["#bbbbff",parseInt("90",16)],["#8899ff",parseInt("91",16)],["#3332aa",parseInt("92",16)],["#3355ee",parseInt("93",16)],["#0000ff",parseInt("94",16)],["#333288",parseInt("95",16)],["#0000aa",parseInt("96",16)],["#101066",parseInt("97",16)],["#000022",parseInt("98",16)],["#99eebb",parseInt("a0",16)],["#66cd77",parseInt("a1",16)],["#226610",parseInt("a2",16)],["#44aa33",parseInt("a3",16)],["#008833",parseInt("a4",16)],["#557755",parseInt("a5",16)],["#225500",parseInt("a6",16)],["#103222",parseInt("a7",16)],["#002210",parseInt("a8",16)],["#ddffbb",parseInt("b0",16)],["#ccff88",parseInt("b1",16)],["#88aa55",parseInt("b2",16)],["#aadd88",parseInt("b3",16)],["#88ff00",parseInt("b4",16)],["#aabb99",parseInt("b5",16)],["#66bb00",parseInt("b6",16)],["#559900",parseInt("b7",16)],["#336600",parseInt("b8",16)],["#bbddff",parseInt("c0",16)],["#77cdff",parseInt("c1",16)],["#335599",parseInt("c2",16)],["#6699ff",parseInt("c3",16)],["#1077ff",parseInt("c4",16)],["#4477aa",parseInt("c5",16)],["#224477",parseInt("c6",16)],["#002277",parseInt("c7",16)],["#001044",parseInt("c8",16)],["#aaffff",parseInt("d0",16)],["#55ffff",parseInt("d1",16)],["#0088bb",parseInt("d2",16)],["#55bbcc",parseInt("d3",16)],["#00cdff",parseInt("d4",16)],["#4499aa",parseInt("d5",16)],["#006688",parseInt("d6",16)],["#004455",parseInt("d7",16)],["#002233",parseInt("d8",16)],["#ccffee",parseInt("e0",16)],["#aaeedd",parseInt("e1",16)],["#33cdaa",parseInt("e2",16)],["#55eebb",parseInt("e3",16)],["#00ffcc",parseInt("e4",16)],["#77aaaa",parseInt("e5",16)],["#00aa99",parseInt("e6",16)],["#008877",parseInt("e7",16)],["#004433",parseInt("e8",16)],["#aaffaa",parseInt("f0",16)],["#77ff77",parseInt("f1",16)],["#66dd44",parseInt("f2",16)],["#00ff00",parseInt("f3",16)],["#22dd22",parseInt("f4",16)],["#55bb55",parseInt("f5",16)],["#00bb00",parseInt("f6",16)],["#008800",parseInt("f7",16)],["#224422",parseInt("f8",16)]],ge=new Map(ye),Ie=function(e){var t=[0,0,0],r=parseInt(e.slice(1),16);return t[0]=r>>16&255,t[1]=r>>8&255,t[2]=255&r,t},Ee=function(e){return"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1)},we=ye.map((function(e){return Ie(e[0])})),Oe=function(e){var t,r,n,a=e[0]/255,o=e[1]/255,i=e[2]/255;return r=(.2126*(a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92)+.7152*(o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92)+.0722*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92))/1,n=(.0193*a+.1192*o+.9505*i)/1.08883,t=(t=(.4124*a+.3576*o+.1805*i)/.95047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(t-r),200*(r-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},je=function(e,t){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],o=Math.sqrt(e[1]*e[1]+e[2]*e[2]),i=o-Math.sqrt(t[1]*t[1]+t[2]*t[2]),c=n*n+a*a-i*i,u=r/1,s=i/(1+.045*o),l=(c=c<0?0:Math.sqrt(c))/(1+.015*o),f=u*u+s*s+l*l;return f<0?0:Math.sqrt(f)},Ae=r(209),Se=r(210),Ce=r.n(Se);function ke(e){return function(e){if(Array.isArray(e))return Pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Me(e,t,r,n,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,a)}function _e(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Me(o,n,a,i,c,"next",e)}function c(e){Me(o,n,a,i,c,"throw",e)}i(void 0)}))}}var xe=function(e){return new Promise((function(t,r){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsDataURL(e)}))},Ne=(new Ae.a,function(e){return new Promise(function(){var t=_e(regeneratorRuntime.mark((function t(r,n){var a,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xe(e);case 2:a=t.sent,(o=new Image).onload=function(){return r(o)},o.src=a;case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}())}),Te=function(e,t){var r=Number.MAX_VALUE,n=-1;return t.forEach((function(t,a){var o=je(Oe(e),Oe(t));o<r&&(r=o,n=a)})),n},Re=function(e,t){for(var r=new Array,n=ke(t),a=0;a<e.length;a+=1){var o=Te(e[a],n);r.push(o)}return r},De={colors:15,method:1,boxSize:[64,64],boxPxls:2,initColors:4096,minHueCols:0,dithKern:null,dithDelta:0,dithSerp:!1,palette:[],reIndex:!1,useCache:!0,cacheFreq:10,colorDist:"euclidean"},ze=function(e,t,r){for(var n=[],a={},o=0,i=e.width/r,c=e.height/t,u=4/(t>r?t:r),s=0;s<t;s+=1)for(var l=0;l<r;l+=1){var f=document.createElement("CANVAS"),p=f.getContext("2d"),h=new Ce.a(De);f.width=32,f.height=32,p.drawImage(e,i*l,c*s,i,c,0,0,32,32),h.sample(p);var d=Re(h.palette(!0),we),v=h.reduce(p,2);n.push(o),a[o]={x:l,y:s,palette:d,pattern:v,zoom:u},o+=1}return{list:n,data:a}};r(454);function Ue(e,t,r,n,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,a)}function Fe(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Ue(o,n,a,i,c,"next",e)}function c(e){Ue(o,n,a,i,c,"throw",e)}i(void 0)}))}}function Le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Be(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Be(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var He=function(e){var t=e.onClose,r=Object(u.b)(),n=Object(a.useRef)(null),i=Object(a.useRef)(null),c=Object(a.useRef)(null),s=Le(Object(a.useState)(null),2),l=s[0],f=s[1],p=Le(Object(a.useState)({width:100,height:100}),2),d=(p[0],p[1],Le(Object(a.useState)(2),2)),v=d[0],m=d[1],b=Le(Object(a.useState)(2),2),y=b[0],g=b[1],I=function(){var e=Fe(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne(n.current.files[0]);case 2:r=e.sent,f(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Fe(regeneratorRuntime.mark((function e(n){var a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=ze(c.current.getCroppedCanvas(),y,v),o=a.list,i=a.data,r(A(o,i,y,v)),t();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){c.current&&(c.current.destroy(),c.current=null),c.current=new fe.a(i.current,{aspectRatio:v/y,viewMode:1})};return Object(a.useEffect)((function(){l&&w()}),[l]),Object(a.useEffect)((function(){l&&w()}),[v,y]),o.a.createElement("div",{className:"image-converter"},o.a.createElement("div",{className:"image-converter__preview"},o.a.createElement("img",{className:"image-converter__input-img",ref:i,src:l&&l.src})),o.a.createElement("div",{className:"image-converter__tool"},o.a.createElement("label",{className:"image-converter__select-wrap"},o.a.createElement("input",{type:"file",accept:".jpg,.jpeg,.png",className:"image-converter__select-input",ref:n,onChange:I}),o.a.createElement(be,{style:"folder"})," 匯入"),o.a.createElement("div",{className:"image-converter__crop-count"},"塊數:",o.a.createElement(pe.a,{labelId:"col-select",value:y,onChange:function(e){return g(e.target.value)}},o.a.createElement(he.a,{value:1},"1"),o.a.createElement(he.a,{value:2},"2"),o.a.createElement(he.a,{value:3},"3"),o.a.createElement(he.a,{value:4},"4")),"x",o.a.createElement(pe.a,{labelId:"row-select",value:v,onChange:function(e){return m(e.target.value)}},o.a.createElement(he.a,{value:1},"1"),o.a.createElement(he.a,{value:2},"2"),o.a.createElement(he.a,{value:3},"3"),o.a.createElement(he.a,{value:4},"4"))),o.a.createElement(h.a,{onClick:E,disabled:!l},o.a.createElement(be,{style:"crop"})," 裁切")))};He.propTypes={};var Ve=He,Ye=(r(455),function(e){var t=e.index,r=e.data,n=Object(u.b)(),i=Object(a.useRef)(null),c=Object(u.c)(y),s=Object(u.c)(E);return Object(a.useEffect)((function(){var e,t;e=i.current.getContext("2d"),t=r.palette,r.pattern.forEach((function(r,n){var a=n%32,o=Math.floor(n/32),i=t[r];r>-1&&i>-1?(e.fillStyle=ye[i][0],e.fillRect(a*s,o*s,s,s)):e.clearRect(a*s,o*s,s,s)}))}),[r]),o.a.createElement("div",{className:p()("block",{"block--active":t===c}),onClick:function(){return n(function(e){return{type:"UPDATE_ACTIVE_INDEX",index:e}}(t))}},o.a.createElement("canvas",{ref:i,width:32*s,height:32*s}))});Ye.propTypes={};var Xe=Ye,Ge=(r(456),function(e){Object(u.b)();var t=Object(u.c)(m),r=Object(u.c)(b),n=Object(u.c)(O),i=n.col,c=(n.row,Object(u.c)(E));return Object(a.useEffect)((function(){t.length}),[t]),Object(a.useEffect)((function(){}),[]),o.a.createElement("div",{className:"previewer"},o.a.createElement("div",{className:"previewer__block--wrap",style:{width:"".concat((32*c+2)*i,"px")}},t.map((function(e,t){return o.a.createElement(Xe,{key:"rwo-".concat(r[e].x,"-").concat(r[e].y),index:t,data:r[e]})}))))});Ge.propTypes={};var Qe=Ge,$e=r(499),We=r(213);r(457);function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ke(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Je=function(e){var t=e.selectedLabel,r=e.itemRender,n=e.options,i=e.onChange,c=e.className,u=qe(Object(a.useState)(null),2),s=u[0],l=u[1],f=function(){l(null)};return o.a.createElement("div",{className:p()("selector",c)},o.a.createElement(h.a,{onClick:function(e){l(e.currentTarget)}},t),o.a.createElement(We.a,{anchorEl:s,open:Boolean(s),onClose:f},n.map((function(e){return o.a.createElement(he.a,{key:e.key,onClick:function(){return function(e){i(e),f()}(e)}},r(e))}))))};Je.propTypes={};var Ze=Je,et=(r(458),function(e){var t=e.zoom,r=e.hoverCallBack,n=Object(a.useRef)(null),i=Object(a.useRef)(null);return Object(a.useEffect)((function(){n.current&&i.current&&r(n,i)}),[n,i]),o.a.createElement("div",{className:"pattern",onMouseEnter:function(){}},o.a.createElement("canvas",{ref:n,width:32*t,height:32*t}),o.a.createElement("canvas",{ref:i,className:"pattern__preview",width:32*t,height:32*t}))});et.propTypes={};var tt=et;r(459);function rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var at=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],ot=[0,1,2,3,4,5,6,7],it=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],ct=function(e){var t=e.paletteIndex,r=Object(u.b)(),n=rt(Object(a.useState)(null),2),i=n[0],c=n[1],s=function(){c(null)},l=function(e){r(function(e,t){return{type:"UPDATE_PALETTE",paletteIndex:e,colorIndex:t}}(t,e)),s()};return Object(a.useEffect)((function(){}),[]),o.a.createElement("div",{className:"color-palette"},o.a.createElement(h.a,{onClick:function(e){c(e.currentTarget)}},o.a.createElement(be,{style:"pigment"})),o.a.createElement(We.a,{anchorEl:i,open:Boolean(i),onClose:s},o.a.createElement("div",{className:"color-palette__wrap"},o.a.createElement("div",{className:"color-palette__grey"},at.map((function(e){return o.a.createElement("div",{key:"".concat(e,"-").concat(ye[e][0]),className:p()("color-palette__color-block"),onClick:function(){return l(e)},style:{backgroundColor:"".concat(ye[e][0])}})}))),it.map((function(e){return o.a.createElement("div",{key:"color-set-".concat(e)},ot.map((function(t){return o.a.createElement("div",{key:"".concat(e,"-").concat(t,"-").concat(ye[15+t+9*e][0]),className:p()("color-palette__color-block"),onClick:function(){return l(15+t+9*e)},style:{backgroundColor:"".concat(ye[15+t+9*e][0])}})})))})))))};ct.propTypes={};var ut=ct,st=(r(460),function(e){var t=e.pickupColor,r=e.paletteIndex,n=e.className,i=(Object(u.b)(),Object(u.c)(g)),c=function(e){t(e)};return Object(a.useEffect)((function(){}),[]),o.a.createElement("div",{className:p()("palette",n)},o.a.createElement("div",{className:"palette__color-wrap"},i.map((function(e,t){return o.a.createElement("div",{key:"".concat(t,"-").concat(e),className:p()("palette__color-block",{"palette__color-block--active":t===r}),onClick:function(){return c(t)},style:{background:"".concat(ye[e][0])}})})),o.a.createElement("div",{className:p()("palette__color-block",{"palette__color-block--active":-1===r}),onClick:function(){return c(-1)}})),o.a.createElement(ut,{paletteIndex:r}))});st.propTypes={};var lt=st,ft=(r(461),function(e){var t=e.label,r=e.icon;return o.a.createElement("div",{className:"icon-label"},o.a.createElement(be,{style:r}),o.a.createElement("div",{className:"icon-label__label"},t))});ft.propTypes={};var pt=ft;r(462);function ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var vt=function(e){var t=e.selectedStamp,r=e.options,n=e.onSizeChange,i=e.onStampChange,c=ht(Object(a.useState)(["s","m","l"]),2),u=c[0],s=c[1];return o.a.createElement("div",{className:"stamp-selector"},o.a.createElement(Ze,{options:r,onChange:function(e){return i((r=e).val),s(r.sizes),void(-1==r.sizes.indexOf(t.size)&&n(r.sizes[0]));var r},selectedLabel:o.a.createElement(be,{style:"libary"}),itemRender:function(e){return o.a.createElement(pt,{icon:e.icon,label:e.label})}}),u.map((function(e){return o.a.createElement($e.a,{onClick:function(){return function(e){n(e)}(e)},color:e===t.size?"primary":"default"},o.a.createElement(be,{style:"".concat(t.type,"-").concat(e)}))})))};vt.propTypes={};var mt=vt;r(463);function bt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(r),!0).forEach((function(t){gt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function It(e){return function(e){if(Array.isArray(e))return Ot(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||wt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||wt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(e,t){if(e){if("string"==typeof e)return Ot(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ot(e,t):void 0}}function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var jt={xl:16,lg:16,md:16,sm:16,xs:8},At=[],St=te(1024),Ct=[{label:"pen",key:"pen",val:"pen",icon:"pen"},{label:"bucket",key:"bucket",val:"bucket",icon:"bucket"},{label:"stamp",key:"stamp",val:"stamp",icon:"stamp"},{label:"ellipse",key:"ellipse",val:"ellipse",icon:"ellipse"},{label:"rect",key:"rect",val:"rect",icon:"rect"},{label:"line",key:"line",val:"line",icon:"line"},{label:"move",key:"move",val:"move",icon:"move"}],kt=[{label:"一般",key:"mirror-0",val:0,icon:"mirror-no"},{label:"水平鏡像",key:"mirror-1",val:1,icon:"mirror-horizontal"},{label:"垂直鏡像",key:"mirror-2",val:2,icon:"mirror-vertical"},{label:"對角鏡像",key:"mirror-3",val:3,icon:"mirror-corner"}],Pt=[{label:"star",key:"star",val:"star",icon:"star-m",sizes:["s","m","l"]},{label:"heart",key:"heart",val:"heart",icon:"heart-m",sizes:["s","m","l"]}],Mt={pattern:null,preview:null},_t=function(e){var t=e.screen,r=Object(u.b)(),n=Et(Object(a.useState)(8),2),i=n[0],c=n[1],s=Object(u.c)(g),l=Object(u.c)(I),f=Object(u.c)(y),p=Object(u.c)(w),h=Et(Object(a.useState)({x:0,y:0}),2),d=h[0],v=h[1],m=Et(Object(a.useState)({x:0,y:0}),2),b=m[0],E=m[1],O=Et(Object(a.useState)(0),2),A=O[0],S=O[1],C=Et(Object(a.useState)(!1),2),k=C[0],P=C[1],M=Et(Object(a.useState)({size:"m",type:"star"}),2),_=M[0],x=M[1],N=Et(Object(a.useState)(Ct[0].val),2),T=N[0],R=N[1],D=Et(Object(a.useState)(kt[0]),2),z=D[0],U=D[1],F=Object(a.useRef)(null),L=Object(a.useRef)(null),B=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Mt.pattern,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(a){var u=e+32*t,l=s[n];l>-1?(a.fillStyle=ye[l][0],a.fillRect(e*i,t*i,i,i)):a.clearRect(e*i,t*i,i,i),o&&(At[u]=n,c&&r(j(At)))}},H=function(e){var t=At[e];return t>-1?t:-1},V=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=[{x:e,y:t}];switch(z.val){case 1:a.push({x:31-e,y:t});break;case 2:a.push({x:e,y:31-t});break;case 3:a.push({x:31-e,y:t}),a.push({x:e,y:31-t}),a.push({x:31-e,y:31-t})}a.forEach((function(e){B(e.x,e.y,r,Mt.pattern,!0,n)}))},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mt.pattern,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t&&e.forEach((function(e,n){var a=n%32,o=Math.floor(n/32);B(a,o,e,t,r)}))},X=function(e,t){var r=F.current.getBoundingClientRect(),n={x:Math.floor((e-r.x)/i),y:Math.floor((t-r.y)/i)};return v(n),n},G=function(e,t){P(!0),X(e,t)},Q=function(){P(!1)},$=function(e,t){F.current.getBoundingClientRect();var r,n,a,o,i,c=X(e,t),u=[];if(k)switch(T){case"pen":V(c.x,c.y,A);break;case"move":r=c.x,n=c.y,a=d.x-r,o=d.y-n,i=new Array(1024),At.forEach((function(e,t){var r=t%32,n=Math.floor(t/32);(r-=a)>31&&(r-=32),(n-=o)>31&&(n-=32),r<0&&(r=32+r),n<0&&(n=32+n),i[r+32*n]=e})),At=i,Y();break;case"line":u=It(St),q(b.x,b.y,d.x,d.y,(function(e,t){u[e+32*t]=A})),Y(u,Mt.preview,!1);break;case"ellipse":u=It(St);var s=(b.x+d.x)/2,l=(b.y+d.y)/2,f=Math.abs(b.x-d.x),p=Math.abs(b.y-d.y);K(s,l,f,p,(function(e,t){u[e+32*t]=A})),Y(u,Mt.preview,!1);break;case"rect":u=It(St),J(b.x,b.y,d.x,d.y,(function(e,t){u[e+32*t]=A})),Y(u,Mt.preview,!1)}"stamp"===T&&(u=It(St),ee({x:c.x,y:c.y,callback:function(e,t){u[e+32*t]=A},size:_.size,type:_.type}),Y(u,Mt.preview,!1))};return Object(a.useEffect)((function(){c(jt[t])}),[t]),Object(a.useEffect)((function(){f>-1&&l&&Y(At=l,Mt.pattern,!1)}),[s]),Object(a.useEffect)((function(){var e=[];if(k)switch(T){case"pen":V(d.x,d.y,A);break;case"bucket":!function(e,t,r){var n=H(e+32*t);n!==r&&function e(t,a){t>=0&&t<=31&&a>=0&&a<=31&&n===H(t+32*a)&&(B(t,a,r,Mt.pattern,!0,!1),e(t+1,a),e(t-1,a),e(t,a+1),e(t,a-1))}(e,t),B(e,t,r)}(d.x,d.y,A);break;case"rect":case"ellipse":case"line":E(d)}else switch(T){case"pen":s&&V(d.x,d.y,A,!0);break;case"line":q(b.x,b.y,d.x,d.y,(function(t,r){e.push({x:t,y:r})})),Y(St,Mt.preview,!1),e.forEach((function(e){B(e.x,e.y,A,Mt.pattern,!0,!1)})),B(e[0].x,e[0].y,A);break;case"ellipse":var t=(b.x+d.x)/2,r=(b.y+d.y)/2,n=Math.abs(b.x-d.x),a=Math.abs(b.y-d.y);K(t,r,n,a,(function(t,r){e.push({x:t,y:r})})),e.forEach((function(e){B(e.x,e.y,A,Mt.pattern,!0,!1)})),B(e[0].x,e[0].y,A);break;case"rect":J(b.x,b.y,d.x,d.y,(function(t,r){e.push({x:t,y:r})})),Y(St,Mt.preview,!1),e.forEach((function(e){B(e.x,e.y,A,Mt.pattern,!0,!1)})),B(e[0].x,e[0].y,A);break;case"stamp":ee({x:d.x,y:d.y,callback:function(t,r){e.push({x:t,y:r})},size:_.size,type:_.type}),Y(St,Mt.preview,!1),e.forEach((function(e){B(e.x,e.y,A,Mt.pattern,!0,!1)})),B(e[0].x,e[0].y,A)}}),[k]),Object(a.useEffect)((function(){L.current=f}),[f,l]),o.a.createElement("div",{className:"painter"},f>-1&&o.a.createElement(lt,{className:"painter__palette-wrap",pickupColor:function(e){S(e)},paletteIndex:A}),o.a.createElement("div",{className:"painter__stretcher-wrap"},o.a.createElement("div",{className:"painter__tool"},Ct.map((function(e){return o.a.createElement($e.a,{key:e.val,onClick:function(){return R(e.val)},color:T===e.val?"primary":"default"},o.a.createElement(be,{style:e.icon}))})),o.a.createElement($e.a,{disabled:p<1,onClick:se},"P")),o.a.createElement("div",{className:"painter__stretcher",onTouchStart:function(e){return G(e.touches[0].clientX,e.touches[0].clientY)},onTouchMove:function(e){return $(e.touches[0].clientX,e.touches[0].clientY)},onTouchEnd:Q,onMouseDown:function(e){return G(e.clientX,e.clientY)},onMouseUp:Q,onMouseMove:function(e){return $(e.clientX,e.clientY)},ref:F},o.a.createElement(tt,{zoom:i,hoverCallBack:function(e,t){Mt.pattern=e.current.getContext("2d"),Mt.preview=t.current.getContext("2d")}}),"line"!==T&&f>-1&&o.a.createElement("div",{className:"painter__indicator",style:yt({top:"".concat(d.y*i,"px"),left:"".concat(d.x*i,"px"),width:"".concat(i,"px"),height:"".concat(i,"px")},ye[s[A]]?{background:"".concat(ye[s[A]][0])}:{})}))),o.a.createElement("div",{className:"painter__sub-tool"},"stamp"===T&&o.a.createElement(mt,{options:Pt,selectedStamp:_,onStampChange:function(e){return x(yt(yt({},_),{},{type:e}))},onSizeChange:function(e){return x(yt(yt({},_),{},{size:e}))}}),"pen"===T&&o.a.createElement(Ze,{className:"painter__mirror-selector",options:kt,onChange:function(e){return U(e)},selectedLabel:o.a.createElement(pt,{icon:z.icon,label:z.label}),itemRender:function(e){return o.a.createElement(pt,{icon:e.icon,label:e.label})}})))};_t.propTypes={};var xt,Nt=_t,Tt=r(211),Rt=r.n(Tt),Dt=function(e){for(var t=new Array,r=0;r<e.length;r++){var n=e.charCodeAt(r);t.push(255&n),t.push(n>>>8)}return t};function zt(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ut(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ut(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw o}}}}function Ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Bt(e,t,r){return t&&Lt(e.prototype,t),r&&Lt(e,r),e}!function(e){var t=function(){function t(e,r,n,a){if(Ft(this,t),this.version=e,this.errorCorrectionLevel=r,this.mask=a,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw"Version value out of range";if(a<-1||a>7)throw"Mask value out of range";this.size=4*e+17;for(var o=[],i=0;i<this.size;i++)o.push(!1);for(var c=0;c<this.size;c++)this.modules.push(o.slice()),this.isFunction.push(o.slice());this.drawFunctionPatterns();var u=this.addEccAndInterleave(n);if(this.drawCodewords(u),-1==a)for(var s=1e9,l=0;l<8;l++){this.applyMask(l),this.drawFormatBits(l);var f=this.getPenaltyScore();f<s&&(a=l,s=f),this.applyMask(l)}if(a<0||a>7)throw"Assertion error";this.mask=a,this.applyMask(a),this.drawFormatBits(a),this.isFunction=[]}return Bt(t,[{key:"getModule",value:function(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}},{key:"drawCanvas",value:function(e,t,r){if(e<=0||t<0)throw"Value out of range";var n=(this.size+2*t)*e;r.width=n,r.height=n;for(var a=r.getContext("2d"),o=-t;o<this.size+t;o++)for(var i=-t;i<this.size+t;i++)a.fillStyle=this.getModule(i,o)?"#000000":"#FFFFFF",a.fillRect((i+t)*e,(o+t)*e,e,e)}},{key:"toSvgString",value:function(e){if(e<0)throw"Border must be non-negative";for(var t=[],r=0;r<this.size;r++)for(var n=0;n<this.size;n++)this.getModule(n,r)&&t.push("M".concat(n+e,",").concat(r+e,"h1v1h-1z"));return'<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '.concat(this.size+2*e," ").concat(this.size+2*e,'" stroke="none">\n\t<rect width="100%" height="100%" fill="#FFFFFF"/>\n\t<path d="').concat(t.join(" "),'" fill="#000000"/>\n</svg>\n')}},{key:"drawFunctionPatterns",value:function(){for(var e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);for(var t=this.getAlignmentPatternPositions(),r=t.length,n=0;n<r;n++)for(var a=0;a<r;a++)0==n&&0==a||0==n&&a==r-1||n==r-1&&0==a||this.drawAlignmentPattern(t[n],t[a]);this.drawFormatBits(0),this.drawVersion()}},{key:"drawFormatBits",value:function(e){for(var t=this.errorCorrectionLevel.formatBits<<3|e,r=t,a=0;a<10;a++)r=r<<1^1335*(r>>>9);var o=21522^(t<<10|r);if(o>>>15!=0)throw"Assertion error";for(var i=0;i<=5;i++)this.setFunctionModule(8,i,n(o,i));this.setFunctionModule(8,7,n(o,6)),this.setFunctionModule(8,8,n(o,7)),this.setFunctionModule(7,8,n(o,8));for(var c=9;c<15;c++)this.setFunctionModule(14-c,8,n(o,c));for(var u=0;u<8;u++)this.setFunctionModule(this.size-1-u,8,n(o,u));for(var s=8;s<15;s++)this.setFunctionModule(8,this.size-15+s,n(o,s));this.setFunctionModule(8,this.size-8,!0)}},{key:"drawVersion",value:function(){if(!(this.version<7)){for(var e=this.version,t=0;t<12;t++)e=e<<1^7973*(e>>>11);var r=this.version<<12|e;if(r>>>18!=0)throw"Assertion error";for(var a=0;a<18;a++){var o=n(r,a),i=this.size-11+a%3,c=Math.floor(a/3);this.setFunctionModule(i,c,o),this.setFunctionModule(c,i,o)}}}},{key:"drawFinderPattern",value:function(e,t){for(var r=-4;r<=4;r++)for(var n=-4;n<=4;n++){var a=Math.max(Math.abs(n),Math.abs(r)),o=e+n,i=t+r;0<=o&&o<this.size&&0<=i&&i<this.size&&this.setFunctionModule(o,i,2!=a&&4!=a)}}},{key:"drawAlignmentPattern",value:function(e,t){for(var r=-2;r<=2;r++)for(var n=-2;n<=2;n++)this.setFunctionModule(e+n,t+r,1!=Math.max(Math.abs(n),Math.abs(r)))}},{key:"setFunctionModule",value:function(e,t,r){this.modules[t][e]=r,this.isFunction[t][e]=!0}},{key:"addEccAndInterleave",value:function(e){var r=this.version,n=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(r,n))throw"Invalid argument";for(var a=t.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][r],o=t.ECC_CODEWORDS_PER_BLOCK[n.ordinal][r],i=Math.floor(t.getNumRawDataModules(r)/8),c=a-i%a,u=Math.floor(i/a),s=[],l=t.reedSolomonComputeDivisor(o),f=0,p=0;f<a;f++){var h=e.slice(p,p+u-o+(f<c?0:1));p+=h.length;var d=t.reedSolomonComputeRemainder(h,l);f<c&&h.push(0),s.push(h.concat(d))}for(var v=[],m=function(e){s.forEach((function(t,r){(e!=u-o||r>=c)&&v.push(t[e])}))},b=0;b<s[0].length;b++)m(b);if(v.length!=i)throw"Assertion error";return v}},{key:"drawCodewords",value:function(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw"Invalid argument";for(var r=0,a=this.size-1;a>=1;a-=2){6==a&&(a=5);for(var o=0;o<this.size;o++)for(var i=0;i<2;i++){var c=a-i,u=0==(a+1&2)?this.size-1-o:o;!this.isFunction[u][c]&&r<8*e.length&&(this.modules[u][c]=n(e[r>>>3],7-(7&r)),r++)}}if(r!=8*e.length)throw"Assertion error"}},{key:"applyMask",value:function(e){if(e<0||e>7)throw"Mask value out of range";for(var t=0;t<this.size;t++)for(var r=0;r<this.size;r++){var n=void 0;switch(e){case 0:n=(r+t)%2==0;break;case 1:n=t%2==0;break;case 2:n=r%3==0;break;case 3:n=(r+t)%3==0;break;case 4:n=(Math.floor(r/3)+Math.floor(t/2))%2==0;break;case 5:n=r*t%2+r*t%3==0;break;case 6:n=(r*t%2+r*t%3)%2==0;break;case 7:n=((r+t)%2+r*t%3)%2==0;break;default:throw"Assertion error"}!this.isFunction[t][r]&&n&&(this.modules[t][r]=!this.modules[t][r])}}},{key:"getPenaltyScore",value:function(){for(var e=0,r=0;r<this.size;r++){for(var n=!1,a=0,o=[0,0,0,0,0,0,0],i=0;i<this.size;i++)this.modules[r][i]==n?5==++a?e+=t.PENALTY_N1:a>5&&e++:(this.finderPenaltyAddHistory(a,o),n||(e+=this.finderPenaltyCountPatterns(o)*t.PENALTY_N3),n=this.modules[r][i],a=1);e+=this.finderPenaltyTerminateAndCount(n,a,o)*t.PENALTY_N3}for(var c=0;c<this.size;c++){for(var u=!1,s=0,l=[0,0,0,0,0,0,0],f=0;f<this.size;f++)this.modules[f][c]==u?5==++s?e+=t.PENALTY_N1:s>5&&e++:(this.finderPenaltyAddHistory(s,l),u||(e+=this.finderPenaltyCountPatterns(l)*t.PENALTY_N3),u=this.modules[f][c],s=1);e+=this.finderPenaltyTerminateAndCount(u,s,l)*t.PENALTY_N3}for(var p=0;p<this.size-1;p++)for(var h=0;h<this.size-1;h++){var d=this.modules[p][h];d==this.modules[p][h+1]&&d==this.modules[p+1][h]&&d==this.modules[p+1][h+1]&&(e+=t.PENALTY_N2)}var v,m=0,b=zt(this.modules);try{for(b.s();!(v=b.n()).done;){m=v.value.reduce((function(e,t){return e+(t?1:0)}),m)}}catch(e){b.e(e)}finally{b.f()}var y=this.size*this.size;return e+=(Math.ceil(Math.abs(20*m-10*y)/y)-1)*t.PENALTY_N4}},{key:"getAlignmentPatternPositions",value:function(){if(1==this.version)return[];for(var e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((this.size-13)/(2*e-2)),r=[6],n=this.size-7;r.length<e;n-=t)r.splice(1,0,n);return r}},{key:"finderPenaltyCountPatterns",value:function(e){var t=e[1];if(t>3*this.size)throw"Assertion error";var r=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(r&&e[0]>=4*t&&e[6]>=t?1:0)+(r&&e[6]>=4*t&&e[0]>=t?1:0)}},{key:"finderPenaltyTerminateAndCount",value:function(e,t,r){return e&&(this.finderPenaltyAddHistory(t,r),t=0),t+=this.size,this.finderPenaltyAddHistory(t,r),this.finderPenaltyCountPatterns(r)}},{key:"finderPenaltyAddHistory",value:function(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}}],[{key:"encodeText",value:function(r,n){var a=e.QrSegment.makeSegments(r);return t.encodeSegments(a,n)}},{key:"encodeBinary",value:function(r,n){var a=e.QrSegment.makeBytes(r);return t.encodeSegments([a],n)}},{key:"encodeSegments",value:function(e,n){var o,i,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(!(t.MIN_VERSION<=c&&c<=u&&u<=t.MAX_VERSION)||s<-1||s>7)throw"Invalid value";for(o=c;;o++){var f=8*t.getNumDataCodewords(o,n),p=a.getTotalBits(e,o);if(p<=f){i=p;break}if(o>=u)throw"Data too long"}for(var h=0,d=[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH];h<d.length;h++){var v=d[h];l&&i<=8*t.getNumDataCodewords(o,v)&&(n=v)}var m,b=[],y=zt(e);try{for(y.s();!(m=y.n()).done;){var g=m.value;r(g.mode.modeBits,4,b),r(g.numChars,g.mode.numCharCountBits(o),b);var I,E=zt(g.getData());try{for(E.s();!(I=E.n()).done;){var w=I.value;b.push(w)}}catch(e){E.e(e)}finally{E.f()}}}catch(e){y.e(e)}finally{y.f()}if(b.length!=i)throw"Assertion error";var O=8*t.getNumDataCodewords(o,n);if(b.length>O)throw"Assertion error";if(r(0,Math.min(4,O-b.length),b),r(0,(8-b.length%8)%8,b),b.length%8!=0)throw"Assertion error";for(var j=236;b.length<O;j^=253)r(j,8,b);for(var A=[];8*A.length<b.length;)A.push(0);return b.forEach((function(e,t){return A[t>>>3]|=e<<7-(7&t)})),new t(o,n,A,s)}},{key:"getNumRawDataModules",value:function(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw"Version number out of range";var r=(16*e+128)*e+64;if(e>=2){var n=Math.floor(e/7)+2;r-=(25*n-10)*n-55,e>=7&&(r-=36)}if(!(208<=r&&r<=29648))throw"Assertion error";return r}},{key:"getNumDataCodewords",value:function(e,r){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[r.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][e]}},{key:"reedSolomonComputeDivisor",value:function(e){if(e<1||e>255)throw"Degree out of range";for(var r=[],n=0;n<e-1;n++)r.push(0);r.push(1);for(var a=1,o=0;o<e;o++){for(var i=0;i<r.length;i++)r[i]=t.reedSolomonMultiply(r[i],a),i+1<r.length&&(r[i]^=r[i+1]);a=t.reedSolomonMultiply(a,2)}return r}},{key:"reedSolomonComputeRemainder",value:function(e,r){var n,a=r.map((function(e){return 0})),o=zt(e);try{var i=function(){var e=n.value^a.shift();a.push(0),r.forEach((function(r,n){return a[n]^=t.reedSolomonMultiply(r,e)}))};for(o.s();!(n=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}return a}},{key:"reedSolomonMultiply",value:function(e,t){if(e>>>8!=0||t>>>8!=0)throw"Byte out of range";for(var r=0,n=7;n>=0;n--)r=r<<1^285*(r>>>7),r^=(t>>>n&1)*e;if(r>>>8!=0)throw"Assertion error";return r}}]),t}();function r(e,t,r){if(t<0||t>31||e>>>t!=0)throw"Value out of range";for(var n=t-1;n>=0;n--)r.push(e>>>n&1)}function n(e,t){return 0!=(e>>>t&1)}t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;var a=function(){function e(t,r,n){if(Ft(this,e),this.mode=t,this.numChars=r,this.bitData=n,r<0)throw"Invalid argument";this.bitData=n.slice()}return Bt(e,[{key:"getData",value:function(){return this.bitData.slice()}}],[{key:"makeBytes",value:function(t){var n,a=[],o=zt(t);try{for(o.s();!(n=o.n()).done;){r(n.value,8,a)}}catch(e){o.e(e)}finally{o.f()}return new e(e.Mode.BYTE,t.length,a)}},{key:"makeNumeric",value:function(t){if(!this.NUMERIC_REGEX.test(t))throw"String contains non-numeric characters";for(var n=[],a=0;a<t.length;){var o=Math.min(t.length-a,3);r(parseInt(t.substr(a,o),10),3*o+1,n),a+=o}return new e(e.Mode.NUMERIC,t.length,n)}},{key:"makeAlphanumeric",value:function(t){if(!this.ALPHANUMERIC_REGEX.test(t))throw"String contains unencodable characters in alphanumeric mode";var n,a=[];for(n=0;n+2<=t.length;n+=2){var o=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n));r(o+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n+1)),11,a)}return n<t.length&&r(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n)),6,a),new e(e.Mode.ALPHANUMERIC,t.length,a)}},{key:"makeSegments",value:function(t){return""==t?[]:this.NUMERIC_REGEX.test(t)?[e.makeNumeric(t)]:this.ALPHANUMERIC_REGEX.test(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]}},{key:"makeEci",value:function(t){var n=[];if(t<0)throw"ECI assignment value out of range";if(t<128)r(t,8,n);else if(t<16384)r(2,2,n),r(t,14,n);else{if(!(t<1e6))throw"ECI assignment value out of range";r(6,3,n),r(t,21,n)}return new e(e.Mode.ECI,0,n)}},{key:"getTotalBits",value:function(e,t){var r,n=0,a=zt(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,i=o.mode.numCharCountBits(t);if(o.numChars>=1<<i)return 1/0;n+=4+i+o.bitData.length}}catch(e){a.e(e)}finally{a.f()}return n}},{key:"toUtf8ByteArray",value:function(e){e=encodeURI(e);for(var t=[],r=0;r<e.length;r++)"%"!=e.charAt(r)?t.push(e.charCodeAt(r)):(t.push(parseInt(e.substr(r+1,2),16)),r+=2);return t}}]),e}();a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.QrSegment=a}(xt||(xt={})),function(e){!function(e){var t=function e(t,r){Ft(this,e),this.ordinal=t,this.formatBits=r};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t}(e.QrCode||(e.QrCode={}))}(xt||(xt={})),function(e){!function(e){var t=function(){function e(t,r){Ft(this,e),this.modeBits=t,this.numBitsCharCount=r}return Bt(e,[{key:"numCharCountBits",value:function(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}}]),e}();t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t}(e.QrSegment||(e.QrSegment={}))}(xt||(xt={}));var Ht=xt,Vt=function(e){return Object(v.a)(e,"author.title")},Yt=function(e){return Object(v.a)(e,"author.author")},Xt=function(e){return Object(v.a)(e,"author.town")};r(464);function Gt(e){return function(e){if(Array.isArray(e))return Qt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Qt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $t=Ht.QrCode,Wt=function(e){var t=e.onClose,r=(Object(u.b)(),Object(u.c)(g)),n=Object(u.c)(I),i=Object(u.c)(y),c=(Object(u.c)(Vt),Object(u.c)(Yt),Object(u.c)(Xt),Object(a.useRef)(null)),s=Object(a.useRef)(null),l=function(){var e=new Array,t=new Array;r.forEach((function(t){var r=Ie(ye[t][0]);e.push([].concat(Gt(r),[255]))})),n.forEach((function(r){t=t.concat(e[r]?e[r]:[0,0,0,0])}));var a=function(e){var t=e.title,r=e.author,n=e.town,a=e.palette,o=e.imageData,i=Dt(t),c=Dt(r),u=Dt(n),s=new Array;s=s.concat(i);for(var l=i.length;l<40;l++)s.push(0);s=(s=s.concat([0,0,182,236])).concat(c);for(var f=c.length;f<18;f++)s.push(0);s=(s=s.concat([0,0,68,197])).concat(u);for(var p=u.length;p<18;p++)s.push(0);s=s.concat([0,0,25,49]);for(var h=new Map,d=0;d<a.length;d++){var v=Ee(a[d]);h.set(v,d);var m=ge.get(v);s.push(m)}s=s.concat([204,10,9,0,0]);for(var b=o.data,y=0;y<b.length;y+=8){var g=[b[y+0],b[y+1],b[y+2],b[y+3]],I=[b[y+4],b[y+5],b[y+6],b[y+7]],E=void 0;E=0==g[3]?15:h.get(Ee([g[0],g[1],g[2]]));var w=void 0;w=0==I[3]?15:h.get(Ee([I[0],I[1],I[2]])),s.push(16*w+E)}return s}({title:"Test Pattern",author:"Zack",town:"Liku",imageData:new ImageData(new Uint8ClampedArray(t),32,32),palette:e});$t.encodeSegments([Ht.QrSegment.makeBytes(a)],$t.Ecc.MEDIUM,19,19).drawCanvas(2,2,s.current)};return Object(a.useEffect)((function(){var e;i>-1&&n&&r&&(e=c.current.getContext("2d"),n.forEach((function(t,n){var a=n%32,o=Math.floor(n/32),i=r[t];t>-1&&i>-1?(e.fillStyle=ye[i][0],e.fillRect(4*a,4*o,4,4)):e.clearRect(4*a,4*o,4,4)})),l())}),[n,r]),o.a.createElement("div",{className:"qr-generator"},o.a.createElement("div",{className:"qr-generator--block"},o.a.createElement("canvas",{ref:c,width:128,height:128})),o.a.createElement(h.a,{onClick:l},o.a.createElement(Rt.a,null),"Generate QR Code"),o.a.createElement(h.a,{onClick:t},"Contiune Edit"),o.a.createElement("div",{className:"qr-generator--qr-code"},o.a.createElement("canvas",{ref:s})))};Wt.propTypes={};var qt=Wt;r(467);function Kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Jt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Zt=function(e){var t=Object(u.b)(),r=Kt(Object(a.useState)(!1),2),n=r[0],i=r[1],c=Kt(Object(a.useState)(!1),2),s=c[0],l=c[1],f=M(),p=function(){i(!1)},v=function(){l(!1)};return Object(a.useEffect)((function(){var e=function(){var e,t,r=!1;try{t=localStorage.getItem("pietroStorageData"),e=JSON.parse(t)}catch(e){console.log(e),r=!0}return t&&!r||(t=JSON.stringify(oe),e=oe,localStorage.setItem("pietroStorageData",t)),ie=[t],ce=0,e.step=0,e}();console.log(e),t(S(e))}),[]),o.a.createElement("div",{className:"editor"},o.a.createElement("div",{className:"editor__wrap"},o.a.createElement(Nt,{screen:f}),o.a.createElement("aside",{className:"editor__aside"},o.a.createElement(Qe,null),o.a.createElement("div",{className:"editor__aside--tool"},o.a.createElement(h.a,{onClick:function(){i(!0)}},o.a.createElement(be,{style:"crop"})," 裁切匯入圖片"),o.a.createElement(h.a,{onClick:function(){l(!0)}},o.a.createElement(be,{style:"qrcode"})," 生成QR code")))),o.a.createElement(d.a,{open:n,onClose:p,className:"editor__modal",keepMounted:!0},o.a.createElement(Ve,{onClose:p})),o.a.createElement(d.a,{open:s,onClose:v,className:"editor__modal",keepMounted:!0},o.a.createElement(qt,{onClose:v})))};Zt.propTypes={};var er=Zt,tr=r(212);function rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(r),!0).forEach((function(t){ar(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ar(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var or=nr(nr({},Object(tr.a)({palette:{text:{primary:"#665042"}},typography:{useNextVariants:!0,fontFamily:'"Noto Sans", Roboto, Helvetica, Arial, sans-serif',button:{textTransform:"none"},h1:{fontSize:40,fontWeight:"bold"},h2:{fontSize:32,fontWeight:"bold"},h3:{fontSize:24,fontWeight:"bold"},h4:{fontSize:16,fontWeight:"bold"},overline:{textTransform:"none"}}})),{},{overrides:{MuiButton:{root:{lineHeight:1,minWidth:24,borderRadius:0}},MuiIconButton:{root:{padding:6},colorPrimary:{color:"#f2f0d9",backgroundColor:"#12c3b9","&:hover":{backgroundColor:"#12c3b9","@media (hover: none)":{backgroundColor:"#12c3b9"}}}}}}),ir=(Object(l.a)(window),function(){return o.a.createElement(u.a,{store:Q},o.a.createElement(s.a,{theme:or},o.a.createElement(er,null)))});c.a.render(o.a.createElement(ir,null),document.getElementById("root"))}});